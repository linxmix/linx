{{arrangement-visual/backdrop
  select=select.ArrangementVisual-backdrop
  height=maxY
  width=maxX
}}

{{!-- {{d3-axis
  select=select.ArrangementVisual-beatAxis
  transform=(svg-translate 0 200)
  scale=beatScale
  orient="top"
  ticks=arrangement.beatCount
  tickSize=200
}} --}}


{{d3-axis
  isD3Visible=showBarGrid
  select=select.ArrangementVisual-barAxis
  transform=(svg-translate 0 height)
  scale=barScale
  orient="top"
  ticks=arrangement.barCount
  tickSize=height
}}

{{d3-axis
  isD3Visible=showPhaseGrid
  select=select.ArrangementVisual-phraseAxis
  transform=(svg-translate 0 height)
  scale=phraseScale
  orient="top"
  ticks=(multiply arrangement.barCount 0.125)
  tickSize=height
}}

{{yield select maxX maxY}}

{{arrangement-visual/playhead
  select=select.ArrangementVisual-playhead
  height=height
  arrangement=arrangement
  pxPerBeat=pxPerBeat
  followPlayhead=followPlayhead

  centerView=(action "centerView")
}}

{{arrangement-visual/marker
  select=select.ArrangementVisual-seekBeatMarker
  height=height
  transform=(svg-translate seekBeatPx)
  pxPerBeat=pxPerBeat
  isD3Visible=showLastPlayMarker
}}
