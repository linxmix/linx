/*! linx 0.0.0 2013-11-10 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(c){var d=c._||a("underscore")._,e=c.Backbone||a("backbone"),f=function(a,b){return function(){var c=d.toArray(arguments),e=c[c.length-1];if("function"==typeof e){c.splice(-1,1),0===c.length&&c.push({}),1===c.length&&"save"===a&&c.push({});var f=c[c.length-1];f.success=function(a,b){e(null,b)},f.error=function(a,b){e(b,null)}}return b.apply(this,c)}};"undefined"!=typeof b&&"undefined"!=typeof b.exports?b.exports=f:c.BackboneCallbacks=f,f.attach=function(a){d.each(["save","destroy","fetch"],function(b){a.Model.prototype[b]=new f(b,a.Model.prototype[b])}),d.each(["fetch"],function(b){a.Collection.prototype[b]=new f(b,a.Collection.prototype[b])})},f.attach(e)}(this)},{backbone:2,underscore:3}],2:[function(a,b,c){(function(){var b,d=this,e=d.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b="undefined"!=typeof c?c:d.Backbone={},b.VERSION="0.9.10";var j=d._;j||"undefined"==typeof a||(j=a("underscore")),b.$=d.jQuery||d.Zepto||d.ender,b.noConflict=function(){return d.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var k=/\s+/,l=function(a,b,c,d){if(!c)return!0;if("object"==typeof c)for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!k.test(c))return!0;for(var f=c.split(k),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d))}},m=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},n=b.Events={on:function(a,b,c){if(!l(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!l(this,"once",a,[b,c])||!b)return this;var d=this,e=j.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c),this},off:function(a,b,c){var d,e,f,g,h,i,k,m;if(!this._events||!l(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:j.keys(this._events),h=0,i=g.length;i>h;h++)if(a=g[h],d=this._events[a]){if(f=[],b||c)for(k=0,m=d.length;m>k;k++)e=d[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&f.push(e);this._events[a]=f}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!l(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&m(c,b),d&&m(d,arguments),this},listenTo:function(a,b,c){var d=this._listeners||(this._listeners={}),e=a._listenerId||(a._listenerId=j.uniqueId("l"));return d[e]=a,a.on(b,"object"==typeof b?this:c,this),this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,"object"==typeof b?this:c,this),b||c||delete d[a._listenerId];else{"object"==typeof b&&(c=this);for(var e in d)d[e].off(b,c,this);this._listeners={}}return this}}};n.bind=n.on,n.unbind=n.off,j.extend(b,n);var o=b.Model=function(a,b){var c,d=a||{};this.cid=j.uniqueId("c"),this.attributes={},b&&b.collection&&(this.collection=b.collection),b&&b.parse&&(d=this.parse(d,b)||{}),(c=j.result(this,"defaults"))&&(d=j.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};j.extend(o.prototype,n,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return j.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return j.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,h,i,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,h=c.silent,g=[],i=this._changing,this._changing=!0,i||(this._previousAttributes=j.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],j.isEqual(l[d],b)||g.push(d),j.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!h){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(i)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,j.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,j.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!j.isEmpty(this.changed):j.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?j.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)j.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return j.clone(this._previousAttributes)},fetch:function(a){a=a?j.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){return a.set(a.parse(c,d),d)?(b&&b(a,c,d),void 0):!1},this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g,h=this.attributes;return null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!d||c&&c.wait||this.set(d,c)?(c=j.extend({validate:!0},c),this._validate(d,c)?(d&&c.wait&&(this.attributes=j.extend({},h,d)),void 0===c.parse&&(c.parse=!0),e=c.success,c.success=function(a,b,c){a.attributes=h;var f=a.parse(b,c);return c.wait&&(f=j.extend(d||{},f)),j.isObject(f)&&!a.set(f,c)?!1:(e&&e(a,b,c),void 0)},f=this.isNew()?"create":c.patch?"patch":"update","patch"===f&&(c.attrs=d),g=this.sync(f,this,c),d&&c.wait&&(this.attributes=h),g):!1):!1},destroy:function(a){a=a?j.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(a,b,e){(e.wait||a.isNew())&&d(),c&&c(a,b,e)},this.isNew())return a.success(this,null,a),!1;var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=j.result(this,"urlRoot")||j.result(this.collection,"url")||H();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return!this.validate||!this.validate(this.attributes,a)},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=j.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,b||{}),!1):!0}});var p=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,j.extend({silent:!0},b))};j.extend(p.prototype,n,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){a=j.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f,h,k,l,m,n,o;for(l=[],m=b.at,n=this.comparator&&null==m&&0!=b.sort,o=j.isString(this.comparator)?this.comparator:null,c=0,d=a.length;d>c;c++)(e=this._prepareModel(f=a[c],b))?(h=this.get(e))?b.merge&&(h.set(f===e?e.attributes:f,b),n&&!k&&h.hasChanged(o)&&(k=!0)):(l.push(e),e.on("all",this._onModelEvent,this),this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e)):this.trigger("invalid",this,f,b);if(l.length&&(n&&(k=!0),this.length+=l.length,null!=m?i.apply(this.models,[m,0].concat(l)):g.apply(this.models,l)),k&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=l.length;d>c;c++)(e=l[c]).trigger("add",e,this,b);return k&&this.trigger("sort",this,b),this},remove:function(a,b){a=j.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,j.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,j.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[a.id||a.cid||a[this._idAttr]||a])},at:function(a){return this.models[a]},where:function(a){return j.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),j.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(j.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return j.invoke(this.models,"get",a)},update:function(a,b){b=j.extend({add:!0,merge:!0,remove:!0},b),b.parse&&(a=this.parse(a,b));var c,d,e,f,g=[],h=[],i={};if(j.isArray(a)||(a=a?[a]:[]),b.add&&!b.remove)return this.add(a,b);for(d=0,e=a.length;e>d;d++)c=a[d],f=this.get(c),b.remove&&f&&(i[f.cid]=!0),(b.add&&!f||b.merge&&f)&&g.push(c);if(b.remove)for(d=0,e=this.models.length;e>d;d++)c=this.models[d],i[c.cid]||h.push(c);return h.length&&this.remove(h,b),g.length&&this.add(g,b),this},reset:function(a,b){b||(b={}),b.parse&&(a=this.parse(a,b));for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models.slice(),this._reset(),a&&this.add(a,j.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?j.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){var e=d.update?"update":"reset";a[e](c,d),b&&b(a,c,d)},this.sync("read",this,a)},create:function(a,b){if(b=b?j.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(a,b,e){e.wait&&c.add(a,e),d&&d(a,b,e)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(a,b){if(a instanceof o)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:!1},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=j.isFunction(b)?b:function(a){return a.get(b)};return j.sortedIndex(this.models,a,d,c)}});var q=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];j.each(q,function(a){p.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.models),j[a].apply(j,b)}});var r=["groupBy","countBy","sortBy"];j.each(r,function(a){p.prototype[a]=function(b,c){var d=j.isFunction(b)?b:function(a){return a.get(b)};return j[a](this.models,d,c)}});var s=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},t=/\((.*?)\)/g,u=/(\(\?)?:\w+/g,v=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;j.extend(s.prototype,n,{initialize:function(){},route:function(a,c,d){return j.isRegExp(a)||(a=this._routeToRegExp(a)),d||(d=this[c]),b.history.route(a,j.bind(function(e){var f=this._extractParameters(a,e);d&&d.apply(this,f),this.trigger.apply(this,["route:"+c].concat(f)),this.trigger("route",c,f),b.history.trigger("route",this,c,f)},this)),this},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes)for(var a,b=j.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(w,"\\$&").replace(t,"(?:$1)?").replace(u,function(a,b){return b?a:"([^/]+)"}).replace(v,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var x=b.History=function(){this.handlers=[],j.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},y=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,A=/msie [\w.]+/,B=/\/$/;x.started=!1,j.extend(x.prototype,n,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(B,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(y,"")},start:function(a){if(x.started)throw new Error("Backbone.history has already been started");x.started=!0,this.options=j.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=A.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(z,"/"),e&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(y,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),x.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=j.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!x.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new x;var C=b.View=function(a){this.cid=j.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},D=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];j.extend(C.prototype,n,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(a||(a=j.result(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];if(j.isFunction(c)||(c=this[a[b]]),!c)throw new Error('Method "'+a[b]+'" does not exist');var d=b.match(D),e=d[1],f=d[2];c=j.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=j.extend({},j.result(this,"options"),a)),j.extend(this,j.pick(a,E)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(j.result(this,"el"),!1);else{var a=j.extend({},j.result(this,"attributes"));this.id&&(a.id=j.result(this,"id")),this.className&&(a["class"]=j.result(this,"className"));var c=b.$("<"+j.result(this,"tagName")+">").attr(a);this.setElement(c,!1)}}});var F={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.sync=function(a,c,d){var e=F[a];j.defaults(d||(d={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=j.result(c,"url")||H()),null!=d.data||!c||"create"!==a&&"update"!==a&&"patch"!==a||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1);var h=d.success;d.success=function(a){h&&h(c,a,d),c.trigger("sync",c,a,d)};var i=d.error;d.error=function(a){i&&i(c,a,d),c.trigger("error",c,a,d)};var k=d.xhr=b.ajax(j.extend(f,d));return c.trigger("request",c,k,d),k},b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var G=function(a,b){var c,d=this;c=a&&j.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},j.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&j.extend(c.prototype,a),c.__super__=d.prototype,c};o.extend=p.extend=s.extend=C.extend=x.extend=G;var H=function(){throw new Error('A "url" property or function must be specified')}}).call(this)},{underscore:3}],3:[function(a,b,c){(function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?(this._wrapped=a,void 0):new z(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=z),c._=z):a._=z,z.VERSION="1.4.4";var A=z.each=z.forEach=function(a,b,c){if(null!=a)if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g in a)if(z.has(a,g)&&b.call(c,a[g],g,a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.contains=z.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!=a.indexOf(b):C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.where=function(a,b,c){return z.isEmpty(b)?c?null:[]:z[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},z.findWhere=function(a,b){return z.where(a,b,!0)},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d};var D=function(a){return z.isFunction(a)?a:function(b){return b[a]}};z.sortBy=function(a,b,c){var d=D(b);return z.pluck(z.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var E=function(a,b,c,d){var e={},f=D(b||z.identity);return A(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};z.groupBy=function(a,b,c){return E(a,b,c,function(a,b,c){(z.has(a,b)?a[b]:a[b]=[]).push(c)})},z.countBy=function(a,b,c){return E(a,b,c,function(a,b){z.has(a,b)||(a[b]=0),a[b]++})},z.sortedIndex=function(a,b,c,d){c=null==c?z.identity:D(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return A(a,function(a){z.isArray(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(k.apply(f,arguments))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=j.call(arguments),b=z.max(z.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=z.pluck(a,""+d);return c},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},z.bind=function(a,b){if(a.bind===y&&y)return y.apply(a,j.call(arguments,1));var c=j.call(arguments,2);return function(){return a.apply(b,c.concat(j.call(arguments)))}},z.partial=function(a){var b=j.call(arguments,1);return function(){return a.apply(this,b.concat(j.call(arguments)))}},z.bindAll=function(a){var b=j.call(arguments,1);return 0===b.length&&(b=z.functions(a)),A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},z.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&(b[b.length]=c);return b},z.values=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push(a[c]);return b},z.pairs=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push([c,a[c]]);return b},z.invert=function(a){var b={};for(var c in a)z.has(a,c)&&(b[a[c]]=c);return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=G(a[g],b[g],c,d)););}else{var i=a.constructor,j=b.constructor;if(i!==j&&!(z.isFunction(i)&&i instanceof i&&z.isFunction(j)&&j instanceof j))return!1;for(var k in a)if(z.has(a,k)&&(g++,!(h=z.has(b,k)&&G(a[k],b[k],c,d))))break;if(h){for(k in b)if(z.has(b,k)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};z.isEqual=function(a,b){return G(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};H.unescape=z.invert(H.escape);var I={escape:new RegExp("["+z.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(H.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(I[a],function(b){return H[a][b]})}}),z.result=function(a,b){if(null==a)return null;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),N.call(this,c.apply(z,a))}})};var J=0;z.uniqueId=function(a){var b=++J+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||K).source,(c.interpolate||K).source,(c.evaluate||K).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(M,function(a){return"\\"+L[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";
try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var N=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],N.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return N.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],4:[function(a,b,c){!function(b){"use strict";function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];if("object"==typeof c)for(var e in c)a[e]="object"==typeof c[e]&&"object"==typeof a[e]?d(a[e]||{},c[e]):c[e]}return a}var e;e="object"==typeof c?c:b.BackbonePouch={};var f=b._;f||"function"!=typeof a||(f=a("underscore"));var g={create:"post",update:"put",patch:"put","delete":"remove"};e.defaults={fetch:"allDocs",listen:!1,options:{post:{},put:{},get:{},remove:{},allDocs:{},query:{},spatial:{},changes:{continuous:!0}}},e.sync=function(a){a=a||{},a=d(e.defaults,a);var b=function(b,c,e){function h(a,d){return a?e.error&&e.error(a):(("create"===b||"update"===b||"patch"===b)&&(d={_id:d.id,_rev:d.rev}),"delete"===b&&(d={}),"read"===b&&e.listen&&e.db.info(function(a,b){e.db.changes(f.extend({},e.options.changes,{since:b.update_seq,onChange:function(a){var b=c.get(a.id);a.deleted?b&&b.destroy():b?b.set(a.doc):c.add(a.doc),"function"==typeof e.options.changes.onChange&&e.options.changes.onChange(a)}}))}),e.success&&e.success(d))}if(e=e||{},e=d(a,c&&c.pouch||{},e),"string"!=typeof b)return e;if(!e.db)throw new Error('A "db" property must be specified');if(c.trigger("request",c,e.db,e),"read"===b){if(c.id)return e.db.get(c.id,e.options.get,h);if("query"===e.fetch||"spatial"===e.fetch){if(!e.options[e.fetch].fun)throw new Error('A "'+e.fetch+'.fun" object must be specified');return e.db[e.fetch](e.options[e.fetch].fun,e.options[e.fetch],h)}e.db[e.fetch](e.options[e.fetch],h)}else e.db[g[b]](c.toJSON(),e.options[g[b]],h);return e};return b.defaults=a,b},e.attachments=function(a){function b(b){if(b.pouch&&b.pouch.db)return b.pouch.db;if(b.collection&&b.collection.pouch&&b.collection.pouch.db)return b.collection.pouch.db;if(a.db)return a.db;var c=b.sync();if(c.db)return c.db;throw new Error('A "db" property must be specified')}return a=a||{},{attachments:function(a){var b=this.get("_attachments")||{};return a?f.filter(f.keys(b),function(c){return"function"==typeof a?a(c,b[c]):b[c].content_type.match(a)}):f.keys(b)},attachment:function(a,c){var d=b(this);return d.getAttachment(this.id,a,c)},attach:function(a,c,d,e){"function"==typeof c&&(e=c,c=void 0,d=void 0),"function"==typeof d&&(e=d,d=void 0),c=c||a.filename,d=d||a.type,this.id||this.set({_id:Math.uuid()},{silent:!0});var f=b(this),g=this;return f.putAttachment(this.id,c,this.get("_rev"),a,d,function(a,b){if(!a&&b.rev){var f=g.get("_attachments")||{};f[c]={content_type:d,stub:!0},g.set({_rev:b.rev,_attachments:f},{silent:!0})}e(a,b)})}}}}(this)},{underscore:5}],5:[function(a,b){b.exports=a(3)},{}],6:[function(a,b,c){!function(d,e){if("object"==typeof c){var f=a("underscore"),g=a("backbone"),h=a("backbone.wreqr"),i=a("backbone.babysitter");b.exports=e(f,g,h,i)}else"function"==typeof define&&define.amd&&define(["underscore","backbone","backbone.wreqr","backbone.babysitter"],e)}(this,function(a,b){!function(a,b,c){"use strict";function d(a){return g.call(a)}function e(a,b){var c=new Error(a);throw c.name=b||"Error",c}var f={};b.Marionette=f,f.$=b.$;var g=Array.prototype.slice;return f.extend=b.Model.extend,f.getOption=function(a,b){if(a&&b){var c;return c=a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]}},f.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi,d=function(d){var e="on"+d.replace(b,a),f=this[e];return c.isFunction(this.trigger)&&this.trigger.apply(this,arguments),c.isFunction(f)?f.apply(this,c.tail(arguments)):void 0};return d}(),f.MonitorDOMRefresh=function(){function a(a){a._isShown=!0,d(a)}function b(a){a._isRendered=!0,d(a)}function d(a){a._isShown&&a._isRendered&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(c){c.listenTo(c,"show",function(){a(c)}),c.listenTo(c,"render",function(){b(c)})}}(),function(a){function b(a,b,d,f){var g=f.split(/\s+/);c.each(g,function(c){var f=a[c];f||e("Method '"+c+"' was configured as an event handler, but does not exist."),a.listenTo(b,d,f,a)})}function d(a,b,c,d){a.listenTo(b,c,d,a)}function f(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e,a)})}function g(a,b,c,d){a.stopListening(b,c,d,a)}function h(a,b,d,e,f){b&&d&&(c.isFunction(d)&&(d=d.call(a)),c.each(d,function(d,g){c.isFunction(d)?e(a,b,g,d):f(a,b,g,d)}))}a.bindEntityEvents=function(a,c,e){h(a,c,e,d,b)},a.unbindEntityEvents=function(a,b,c){h(a,b,c,g,f)}}(f),f.Callbacks=function(){this._deferred=f.$.Deferred(),this._callbacks=[]},c.extend(f.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b}),this._deferred.done(function(c,d){b&&(c=b),a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=f.$.Deferred(),this._callbacks=[],c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),f.Controller=function(a){this.triggerMethod=f.triggerMethod,this.options=a||{},c.isFunction(this.initialize)&&this.initialize(this.options)},f.Controller.extend=f.extend,c.extend(f.Controller.prototype,b.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),f.Region=function(a){if(this.options=a||{},this.el=f.getOption(this,"el"),!this.el){var b=new Error("An 'el' must be specified for a region.");throw b.name="NoElError",b}if(this.initialize){var c=Array.prototype.slice.apply(arguments);this.initialize.apply(this,c)}},c.extend(f.Region,{buildRegion:function(a,b){var d="string"==typeof a,e="string"==typeof a.selector,f="undefined"==typeof a.regionType,g="function"==typeof a;if(!g&&!d&&!e)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;d&&(h=a),a.selector&&(h=a.selector),g&&(i=a),!g&&f&&(i=b),a.regionType&&(i=a.regionType);var j=new i({el:h});return a.parentEl&&(j.getEl=function(b){var d=a.parentEl;return c.isFunction(d)&&(d=d()),d.find(b)}),j}}),c.extend(f.Region.prototype,b.Events,{show:function(a){this.ensureEl();var b=a.isClosed||c.isUndefined(a.$el),d=a!==this.currentView;d&&this.close(),a.render(),(d||b)&&this.open(a),this.currentView=a,f.triggerMethod.call(this,"show",a),f.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return f.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),f.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close(),delete this.$el}}),f.Region.extend=f.extend,f.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={},a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var d={};return c.each(a,function(a,e){"string"==typeof a&&(a={selector:a}),a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(e,a);d[e]=f},this),d},addRegion:function(b,d){var e,f=c.isObject(d),g=c.isString(d),h=!!d.selector;return e=g||f&&h?a.Region.buildRegion(d,a.Region):c.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(b,e),this.triggerMethod("region:add",b,e),e},get:function(a){return this._regions[a]},removeRegion:function(a){var b=this._regions[a];this._remove(a,b)},removeRegions:function(){c.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){c.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,b)},_store:function(a,b){this._regions[a]=b,this._setLength()},_remove:function(a,b){b.close(),delete this._regions[a],this._setLength(),this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=c.size(this._regions)}}),d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return c.each(d,function(a){b.prototype[a]=function(){var b=c.values(this._regions),d=[b].concat(c.toArray(arguments));return c[a].apply(c,d)}}),b}(f),f.TemplateCache=function(a){this.templateId=a},c.extend(f.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new f.TemplateCache(a),this.templateCaches[a]=b),b.load()},clear:function(){var a,b=d(arguments),c=b.length;if(c>0)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(f.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var b=f.$(a).html();return b&&0!==b.length||e("Could not find template: '"+a+"'","NoTemplateError"),b},compileTemplate:function(a){return c.template(a)}}),f.Renderer={render:function(a,b){if(!a){var c=new Error("Cannot render the template since it's false, null or undefined.");throw c.name="TemplateNotFoundError",c}var d;return d="function"==typeof a?a:f.TemplateCache.get(a),d(b)}},f.View=b.View.extend({constructor:function(){c.bindAll(this,"render");var a=Array.prototype.slice.apply(arguments);b.View.prototype.constructor.apply(this,a),f.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:f.triggerMethod,getTemplate:function(){return f.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var b=f.getOption(this,"templateHelpers");return c.isFunction(b)&&(b=b.call(this)),c.extend(a,b)},configureTriggers:function(){if(this.triggers){var a={},b=c.result(this,"triggers");return c.each(b,function(b,c){a[c]=function(a){a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation();var c={view:this,model:this.model,collection:this.collection};this.triggerMethod(b,c)}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a),f.bindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.bindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events,c.isFunction(a)&&(a=a.call(this));var d={},e=this.configureTriggers();c.extend(d,a,e),b.View.prototype.delegateEvents.call(this,d)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);b.View.prototype.undelegateEvents.apply(this,a),f.unbindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.unbindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var a=this.triggerMethod("before:close");a!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={},c.each(c.keys(a),function(b){var c=a[b];this.ui[b]=this.$(c)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),f.ItemView=f.View.extend({constructor:function(){f.View.prototype.constructor.apply(this,d(arguments))},serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=f.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),f.View.prototype.close.apply(this,d(arguments)),this.triggerMethod("item:closed"))}}),f.CollectionView=f.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),f.View.prototype.constructor.apply(this,d(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){f.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b),this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=f.getOption(this,"emptyView");if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var c=new b.Model;this.addItemView(c,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var a=f.getOption(this,"itemView");return a||e("An `itemView` must be specified","NoItemViewError"),a},addItemView:function(a,b,d){var e=f.getOption(this,"itemViewOptions");c.isFunction(e)&&(e=e.call(this,a,d));var g=this.buildItemView(a,b,e);this.addChildViewEventForwarding(g),this.triggerMethod("before:item:added",g),this.children.add(g),this.renderItemView(g,d),this._isShown&&f.triggerMethod.call(g,"show"),this.triggerMethod("after:item:added",g)},addChildViewEventForwarding:function(a){var b=f.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var c=d(arguments);c[0]=b+":"+c[0],c.splice(1,0,a),f.triggerMethod.apply(this,c)},this)},renderItemView:function(a,b){a.render(),this.appendHtml(this,a,b)},buildItemView:function(a,b,d){var e=c.extend({model:a},d);return new b(e)},removeItemView:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a)),this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(a,b){a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),f.View.prototype.close.apply(this,d(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this),this.checkEmpty()}}),f.CompositeView=f.CollectionView.extend({constructor:function(){f.CollectionView.prototype.constructor.apply(this,d(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var a=f.getOption(this,"itemView")||this.constructor;return a||e("An `itemView` must be specified","NoItemViewError"),a},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(f.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a);var b=this.getTemplate();return f.Renderer.render(b,a)},appendHtml:function(a,b){var c=this.getItemViewContainer(a);c.append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b,d=f.getOption(a,"itemViewContainer");if(d){var g=c.isFunction(d)?d():d;b=a.$(g),b.length<=0&&e("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")}else b=a.$el;return a.$itemViewContainer=b,b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),f.Layout=f.ItemView.extend({regionType:f.Region,constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),f.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments),b=f.ItemView.prototype.render.apply(this,a);return b},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);f.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this,c={regionType:f.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager(),b=c.isFunction(this.regions)?this.regions(a):this.regions||{},this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new f.RegionManager,this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b,this.trigger("region:add",a,b)}),this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a],this.trigger("region:remove",a,b)})}}),f.AppRouter=b.Router.extend({constructor:function(a){b.Router.prototype.constructor.apply(this,d(arguments)),this.options=a||{};var c=f.getOption(this,"appRoutes"),e=this._getController();this.processAppRoutes(e,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return f.getOption(this,"controller")},_addAppRoute:function(a,b,d){var e=a[d];if(!e)throw new Error("Method '"+d+"' was not found on the controller");this.route(b,d,c.bind(e,a))}}),f.Application=function(a){this._initRegionManager(),this._initCallbacks=new f.Callbacks,this.vent=new b.Wreqr.EventAggregator,this.commands=new b.Wreqr.Commands,this.reqres=new b.Wreqr.RequestResponse,this.submodules={},c.extend(this,a),this.triggerMethod=f.triggerMethod},c.extend(f.Application.prototype,b.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a),this._initCallbacks.run(a,this),this.triggerMethod("initialize:after",a),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(){var a=d(arguments);return a.unshift(this),f.Module.create.apply(f.Module,a)},_initRegionManager:function(){this._regionManager=new f.RegionManager,this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b}),this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}}),f.Application.extend=f.extend,f.Module=function(a,b){this.moduleName=a,this.submodules={},this._setupInitializersAndFinalizers(),this.app=b,this.startWithParent=!0,this.triggerMethod=f.triggerMethod},c.extend(f.Module.prototype,b.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,f.triggerMethod.call(this,"before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),f.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var e=c.flatten([this,this.app,b,f,f.$,c,d]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new f.Callbacks,this._finalizerCallbacks=new f.Callbacks}}),c.extend(f.Module,{create:function(a,b,e){var f=a,g=d(arguments);g.splice(0,3),b=b.split(".");var h=b.length,i=[];return i[h-1]=e,c.each(b,function(b,c){var d=f;f=this._getModule(d,b,a),this._addModuleDefinition(d,f,i[c],g)},this),f},_getModule:function(a,b,c){var d=a[b];return d||(d=new f.Module(b,c),a[b]=d,a.submodules[b]=d),d},_addModuleDefinition:function(a,b,d,e){var f,g;c.isFunction(d)?(f=d,g=!0):c.isObject(d)?(f=d.define,g=d.startWithParent):g=!0,f&&b.addDefinition(f,e),b.startWithParent=b.startWithParent&&g,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),f}(this,b,a);return b.Marionette})},{backbone:9,"backbone.babysitter":7,"backbone.wreqr":8,underscore:41}],7:[function(a,b,c){!function(d,e){if("object"==typeof c){var f=a("underscore"),g=a("backbone");b.exports=e(f,g)}else"function"==typeof define&&define.amd&&define(["underscore","backbone"],e)}(this,function(a,b){"option strict";return b.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength()},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(b,a),b.ChildViewContainer})},{backbone:9,underscore:41}],8:[function(a,b,c){!function(d,e){if("object"==typeof c){var f=a("underscore"),g=a("backbone");b.exports=e(f,g)}else"function"==typeof define&&define.amd&&define(["underscore","backbone"],e)}(this,function(a,b){"use strict";return b.Wreqr=function(a,b,c){var d={};return d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw new Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,c),d.CommandStorage=function(){var b=function(a){this.options=a,this._commands={},c.isFunction(this.initialize)&&this.initialize(a)};return c.extend(b.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b)},clearCommands:function(a){var b=this.getCommands(a);b.instances=[]}}),b}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,d){var e=this.storage.getCommands(a);c.each(e.instances,function(a){b.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var b,d=a.storageType||this.storageType;b=c.isFunction(d)?new d:d,this.storage=b}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.getHandler(a).apply(this,b)}})}(d),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,c),d}(b,b.Marionette,a),b.Wreqr})},{backbone:9,underscore:41}],9:[function(a,b,c){(function(){var b,d=this,e=d.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b="undefined"!=typeof c?c:d.Backbone={},b.VERSION="1.0.0";var j=d._;j||"undefined"==typeof a||(j=a("underscore")),b.$=d.jQuery||d.Zepto||d.ender||d.$,b.noConflict=function(){return d.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var k=b.Events={on:function(a,b,c){if(!m(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!m(this,"once",a,[b,c])||!b)return this;var d=this,e=j.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,h,i,k,l;if(!this._events||!m(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:j.keys(this._events),h=0,i=g.length;i>h;h++)if(a=g[h],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;l>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!m(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&n(c,b),d&&n(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},l=/\s+/,m=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(l.test(c)){for(var f=c.split(l),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},n=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},o={listenTo:"on",listenToOnce:"once"};j.each(o,function(a,b){k[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=j.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),k.bind=k.on,k.unbind=k.off,j.extend(b,k);var p=b.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=j.uniqueId("c"),this.attributes={},j.extend(this,j.pick(b,q)),b.parse&&(d=this.parse(d,b)||{}),(c=j.result(this,"defaults"))&&(d=j.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},q=["url","urlRoot","collection"];j.extend(p.prototype,k,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return j.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return j.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,h,i,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,h=c.silent,g=[],i=this._changing,this._changing=!0,i||(this._previousAttributes=j.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],j.isEqual(l[d],b)||g.push(d),j.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!h){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(i)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,j.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,j.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!j.isEmpty(this.changed):j.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?j.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)j.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return j.clone(this._previousAttributes)},fetch:function(a){a=a?j.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),b.trigger("sync",b,d,a),void 0):!1},N(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;
if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=j.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=j.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var h=this,i=c.success;return c.success=function(a){h.attributes=g;var b=h.parse(a,c);return c.wait&&(b=j.extend(d||{},b)),j.isObject(b)&&!h.set(b,c)?!1:(i&&i(h,a,c),h.trigger("sync",h,a,c),void 0)},N(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?j.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;N(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=j.result(this,"urlRoot")||j.result(this.collection,"url")||M();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},j.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=j.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,j.extend(b||{},{validationError:c})),!1):!0}});var r=["keys","values","pairs","invert","pick","omit"];j.each(r,function(a){p.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.attributes),j[a].apply(j,b)}});var s=b.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,j.extend({silent:!0},b))},t={add:!0,remove:!0,merge:!0},u={add:!0,merge:!1,remove:!1};j.extend(s.prototype,k,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,j.defaults(b||{},u))},remove:function(a,b){a=j.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=j.defaults(b||{},t),b.parse&&(a=this.parse(a,b)),j.isArray(a)||(a=a?[a]:[]);var c,d,e,f,h,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=j.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(e=this._prepareModel(a[c],b))&&((f=this.get(e))?(b.remove&&(p[f.cid]=!0),b.merge&&(f.set(e.attributes,b),l&&!h&&f.hasChanged(m)&&(h=!0))):b.add&&(n.push(e),e.on("all",this._onModelEvent,this),this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(e=this.models[c]).cid]||o.push(e);o.length&&this.remove(o,b)}if(n.length&&(l&&(h=!0),this.length+=n.length,null!=k?i.apply(this.models,[k,0].concat(n)):g.apply(this.models,n)),h&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(e=n[c]).trigger("add",e,this,b);return h&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,j.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,j.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,j.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return j.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),j.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(j.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=j.isFunction(b)?b:function(a){return a.get(b)};return j.sortedIndex(this.models,a,d,c)},pluck:function(a){return j.invoke(this.models,"get",a)},fetch:function(a){a=a?j.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},N(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?j.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof p)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];j.each(v,function(a){s.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.models),j[a].apply(j,b)}});var w=["groupBy","countBy","sortBy"];j.each(w,function(a){s.prototype[a]=function(b,c){var d=j.isFunction(b)?b:function(a){return a.get(b)};return j[a](this.models,d,c)}});var x=b.View=function(a){this.cid=j.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,z=["model","collection","el","id","attributes","className","tagName","events"];j.extend(x.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=j.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(j.isFunction(c)||(c=this[a[b]]),c){var d=b.match(y),e=d[1],f=d[2];c=j.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=j.extend({},j.result(this,"options"),a)),j.extend(this,j.pick(a,z)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(j.result(this,"el"),!1);else{var a=j.extend({},j.result(this,"attributes"));this.id&&(a.id=j.result(this,"id")),this.className&&(a["class"]=j.result(this,"className"));var c=b.$("<"+j.result(this,"tagName")+">").attr(a);this.setElement(c,!1)}}}),b.sync=function(a,c,d){var e=A[a];j.defaults(d||(d={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=j.result(c,"url")||M()),null!=d.data||!c||"create"!==a&&"update"!==a&&"patch"!==a||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=d.xhr=b.ajax(j.extend(f,d));return c.trigger("request",c,h,d),h};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var B=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,E=/\*\w+/g,F=/[\-{}\[\]+?.,\\\^$|#\s]/g;j.extend(B.prototype,k,{initialize:function(){},route:function(a,c,d){j.isRegExp(a)||(a=this._routeToRegExp(a)),j.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return b.history.route(a,function(f){var g=e._extractParameters(a,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),b.history.trigger("route",e,c,g)}),this},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=j.result(this,"routes");for(var a,b=j.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(F,"\\$&").replace(C,"(?:$1)?").replace(D,function(a,b){return b?a:"([^/]+)"}).replace(E,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return j.map(c,function(a){return a?decodeURIComponent(a):null})}});var G=b.History=function(){this.handlers=[],j.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},H=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,J=/msie [\w.]+/,K=/\/$/;G.started=!1,j.extend(G.prototype,k,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(K,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(H,"")},start:function(a){if(G.started)throw new Error("Backbone.history has already been started");G.started=!0,this.options=j.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=J.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(I,"/"),e&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(H,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),G.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=j.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!G.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new G;var L=function(a,b){var c,d=this;c=a&&j.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},j.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&j.extend(c.prototype,a),c.__super__=d.prototype,c};p.extend=s.extend=B.extend=x.extend=G.extend=L;var M=function(){throw new Error('A "url" property or function must be specified')},N=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}).call(this)},{underscore:10}],10:[function(a,b,c){(function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?(this._wrapped=a,void 0):new z(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=z),c._=z):a._=z,z.VERSION="1.5.2";var A=z.each=z.forEach=function(a,b,c){if(null!=a)if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g=z.keys(a),d=0,f=g.length;f>d;d++)if(b.call(c,a[g[d]],g[d],a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.contains=z.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!=a.indexOf(b):C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.where=function(a,b,c){return z.isEmpty(b)?c?void 0:[]:z[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},z.findWhere=function(a,b){return z.where(a,b,!0)},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d},z.sample=function(a,b,c){return arguments.length<2||c?a[z.random(a.length-1)]:z.shuffle(a).slice(0,Math.max(0,b))};var D=function(a){return z.isFunction(a)?a:function(b){return b[a]}};z.sortBy=function(a,b,c){var d=D(b);return z.pluck(z.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var E=function(a){return function(b,c,d){var e={},f=null==c?z.identity:D(c);return A(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};z.groupBy=E(function(a,b,c){(z.has(a,b)?a[b]:a[b]=[]).push(c)}),z.indexBy=E(function(a,b,c){a[b]=c}),z.countBy=E(function(a,b){z.has(a,b)?a[b]++:a[b]=1}),z.sortedIndex=function(a,b,c,d){c=null==c?z.identity:D(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return b&&z.every(a,z.isArray)?k.apply(c,a):(A(a,function(a){z.isArray(a)||z.isArguments(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c)};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(z.flatten(arguments,!0))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=z.max(z.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=z.pluck(arguments,""+c);return b},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var G=function(){};z.bind=function(a,b){var c,d;if(y&&a.bind===y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return c=j.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(j.call(arguments)));G.prototype=a.prototype;var e=new G;G.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return Object(f)===f?f:e}},z.partial=function(a){var b=j.call(arguments,1);return function(){return a.apply(this,b.concat(j.call(arguments)))}},z.bindAll=function(a){var b=j.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},z.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&b.push(c);return b},z.values=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},z.pairs=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},z.invert=function(a){for(var b={},c=z.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var H=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(z.isFunction(g)&&g instanceof g&&z.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=H(a[i],b[i],c,d)););}else{for(var k in a)if(z.has(a,k)&&(i++,!(j=z.has(b,k)&&H(a[k],b[k],c,d))))break;if(j){for(k in b)if(z.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};z.isEqual=function(a,b){return H(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=z.invert(I.escape);var J={escape:new RegExp("["+z.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(I.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(J[a],function(b){return I[a][b]})}}),z.result=function(a,b){if(null==a)return void 0;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),O.call(this,c.apply(z,a))}})};var K=0;z.uniqueId=function(a){var b=++K+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(N,function(a){return"\\"+M[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var O=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],O.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return O.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],11:[function(a,b,c){function d(a){return"[object Array]"===j.call(a)}function e(a,b){var c;if(null===a)c={__proto__:null};else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return"undefined"!=typeof b&&Object.defineProperties&&Object.defineProperties(c,b),c}function f(a){return"object"!=typeof a&&"function"!=typeof a||null===a}function g(a){if(f(a))throw new TypeError("Object.keys called on a non-object");var b=[];for(var c in a)k.call(a,c)&&b.push(c);return b}function h(a){if(f(a))throw new TypeError("Object.getOwnPropertyNames called on a non-object");var b=g(a);return c.isArray(a)&&-1===c.indexOf(a,"length")&&b.push("length"),b}function i(a,b){return{value:a[b]}}var j=Object.prototype.toString,k=Object.prototype.hasOwnProperty;c.isArray="function"==typeof Array.isArray?Array.isArray:d,c.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1},c.filter=function(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c},c.forEach=function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)},c.map=function(a,b){if(a.map)return a.map(b);for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=b(a[d],d,a);return c},c.reduce=function(a,b,c){if(a.reduce)return a.reduce(b,c);var d,e=!1;2<arguments.length&&(d=c,e=!0);for(var f=0,g=a.length;g>f;++f)a.hasOwnProperty(f)&&(e?d=b(d,a[f],f,a):(d=a[f],e=!0));return d},c.substr="b"!=="ab".substr(-1)?function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}:function(a,b,c){return a.substr(b,c)},c.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},c.bind=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();if(b.bind)return b.bind.apply(b,a);var c=a.shift();return function(){b.apply(c,a.concat([Array.prototype.slice.call(arguments)]))}},c.create="function"==typeof Object.create?Object.create:e;var l="function"==typeof Object.keys?Object.keys:g,m="function"==typeof Object.getOwnPropertyNames?Object.getOwnPropertyNames:h;if((new Error).hasOwnProperty("description")){var n=function(a,b){return"[object Error]"===j.call(a)&&(b=c.filter(b,function(a){return"description"!==a&&"number"!==a&&"message"!==a})),b};c.keys=function(a){return n(a,l(a))},c.getOwnPropertyNames=function(a){return n(a,m(a))}}else c.keys=l,c.getOwnPropertyNames=m;if("function"==typeof Object.getOwnPropertyDescriptor)try{Object.getOwnPropertyDescriptor({a:1},"a"),c.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor}catch(o){c.getOwnPropertyDescriptor=function(a,b){try{return Object.getOwnPropertyDescriptor(a,b)}catch(c){return i(a,b)}}}else c.getOwnPropertyDescriptor=i},{}],12:[function(a,b){function c(a,b){return m.isUndefined(b)?""+b:!m.isNumber(b)||!isNaN(b)&&isFinite(b)?m.isFunction(b)||m.isRegExp(b)?b.toString():b:b.toString()}function d(a,b){return m.isString(a)?a.length<b?a:a.slice(0,b):a}function e(a){return d(JSON.stringify(a.actual,c),128)+" "+a.operator+" "+d(JSON.stringify(a.expected,c),128)}function f(a,b,c,d,e){throw new p.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function g(a,b){a||f(a,!0,b,"==",p.ok)}function h(a,b){if(a===b)return!0;if(m.isBuffer(a)&&m.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return m.isDate(a)&&m.isDate(b)?a.getTime()===b.getTime():m.isRegExp(a)&&m.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:m.isObject(a)||m.isObject(b)?j(a,b):a==b}function i(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function j(a,b){if(m.isNullOrUndefined(a)||m.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(i(a))return i(b)?(a=o.call(a),b=o.call(b),h(a,b)):!1;try{var c,d,e=n.keys(a),f=n.keys(b)
}catch(g){return!1}if(e.length!=f.length)return!1;for(e.sort(),f.sort(),d=e.length-1;d>=0;d--)if(e[d]!=f[d])return!1;for(d=e.length-1;d>=0;d--)if(c=e[d],!h(a[c],b[c]))return!1;return!0}function k(a,b){return a&&b?"[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b?!0:b.call({},a)===!0?!0:!1:!1}function l(a,b,c,d){var e;m.isString(c)&&(d=c,c=null);try{b()}catch(g){e=g}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&f(e,c,"Missing expected exception"+d),!a&&k(e,c)&&f(e,c,"Got unwanted exception"+d),a&&e&&c&&!k(e,c)||!a&&e)throw e}var m=a("util"),n=a("_shims"),o=Array.prototype.slice,p=b.exports=g;p.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,this.message=a.message||e(this)},m.inherits(p.AssertionError,Error),p.fail=f,p.ok=g,p.equal=function(a,b,c){a!=b&&f(a,b,c,"==",p.equal)},p.notEqual=function(a,b,c){a==b&&f(a,b,c,"!=",p.notEqual)},p.deepEqual=function(a,b,c){h(a,b)||f(a,b,c,"deepEqual",p.deepEqual)},p.notDeepEqual=function(a,b,c){h(a,b)&&f(a,b,c,"notDeepEqual",p.notDeepEqual)},p.strictEqual=function(a,b,c){a!==b&&f(a,b,c,"===",p.strictEqual)},p.notStrictEqual=function(a,b,c){a===b&&f(a,b,c,"!==",p.notStrictEqual)},p.throws=function(){l.apply(this,[!0].concat(o.call(arguments)))},p.doesNotThrow=function(){l.apply(this,[!1].concat(o.call(arguments)))},p.ifError=function(a){if(a)throw a}},{_shims:11,util:13}],13:[function(a,b,c){function d(a,b){var d={seen:[],stylize:f};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),o(b)?d.showHidden=b:b&&c._extend(d,b),u(d.showHidden)&&(d.showHidden=!1),u(d.depth)&&(d.depth=2),u(d.colors)&&(d.colors=!1),u(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=e),h(d,a,d.depth)}function e(a,b){var c=d.styles[b];return c?"["+d.colors[c][0]+"m"+a+"["+d.colors[c][1]+"m":a}function f(a){return a}function g(a){var b={};return G.forEach(a,function(a){b[a]=!0}),b}function h(a,b,d){if(a.customInspect&&b&&z(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d);return s(e)||(e=h(a,e,d)),e}var f=i(a,b);if(f)return f;var o=G.keys(b),p=g(o);if(a.showHidden&&(o=G.getOwnPropertyNames(b)),0===o.length){if(z(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(v(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(x(b))return a.stylize(Date.prototype.toString.call(b),"date");if(y(b))return j(b)}var r="",t=!1,u=["{","}"];if(n(b)&&(t=!0,u=["[","]"]),z(b)){var w=b.name?": "+b.name:"";r=" [Function"+w+"]"}if(v(b)&&(r=" "+RegExp.prototype.toString.call(b)),x(b)&&(r=" "+Date.prototype.toUTCString.call(b)),y(b)&&(r=" "+j(b)),0===o.length&&(!t||0==b.length))return u[0]+r+u[1];if(0>d)return v(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var A;return A=t?k(a,b,d,p,o):o.map(function(c){return l(a,b,d,p,c,t)}),a.seen.pop(),m(A,r,u)}function i(a,b){if(u(b))return a.stylize("undefined","undefined");if(s(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return r(b)?a.stylize(""+b,"number"):o(b)?a.stylize(""+b,"boolean"):p(b)?a.stylize("null","null"):void 0}function j(a){return"["+Error.prototype.toString.call(a)+"]"}function k(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(l(a,b,c,d,String(g),!0)):f.push("");return G.forEach(e,function(e){e.match(/^\d+$/)||f.push(l(a,b,c,d,e,!0))}),f}function l(a,b,c,d,e,f){var g,i,j;if(j=G.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?i=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(i=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),i||(G.indexOf(a.seen,j.value)<0?(i=p(c)?h(a,j.value,null):h(a,j.value,c-1),i.indexOf("\n")>-1&&(i=f?i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special")),u(g)){if(f&&e.match(/^\d+$/))return i;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+i}function m(a,b,c){var d=0,e=G.reduce(a,function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function n(a){return G.isArray(a)}function o(a){return"boolean"==typeof a}function p(a){return null===a}function q(a){return null==a}function r(a){return"number"==typeof a}function s(a){return"string"==typeof a}function t(a){return"symbol"==typeof a}function u(a){return void 0===a}function v(a){return w(a)&&"[object RegExp]"===C(a)}function w(a){return"object"==typeof a&&a}function x(a){return w(a)&&"[object Date]"===C(a)}function y(a){return w(a)&&"[object Error]"===C(a)}function z(a){return"function"==typeof a}function A(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function B(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.binarySlice}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),I[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=a("_shims"),H=/%[sdj%]/g;c.format=function(a){if(!s(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(d(arguments[c]));return b.join(" ")}for(var c=1,e=arguments,f=e.length,g=String(a).replace(H,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(e[c++]);case"%d":return Number(e[c++]);case"%j":try{return JSON.stringify(e[c++])}catch(b){return"[Circular]"}default:return a}}),h=e[c];f>c;h=e[++c])g+=p(h)||!w(h)?" "+h:" "+d(h);return g},c.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=n,c.isBoolean=o,c.isNull=p,c.isNullOrUndefined=q,c.isNumber=r,c.isString=s,c.isSymbol=t,c.isUndefined=u,c.isRegExp=v,c.isObject=w,c.isDate=x,c.isError=y,c.isFunction=z,c.isPrimitive=A,c.isBuffer=B;var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=function(a,b){a.super_=b,a.prototype=G.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},c._extend=function(a,b){if(!b||!w(b))return a;for(var c=G.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}},{_shims:11}],14:[function(a,b,c){c.readIEEE754=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?0:e-1,m=c?1:-1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.writeIEEE754=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?f-1:0,o=d?-1:1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],15:[function(a,b,c){function d(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function e(b,c,f){if(E||(E=a("assert")),!(this instanceof e))return new e(b,c,f);if(this.parent=this,this.offset=0,"base64"==c&&"string"==typeof b)for(b=d(b);b.length%4!=0;)b+="=";var h;if("number"==typeof f){this.length=g(c);for(var j=0;j<this.length;j++)this[j]=b.get(j+f)}else{switch(h=typeof b){case"number":this.length=g(b);break;case"string":this.length=e.byteLength(b,c);break;case"object":this.length=g(b.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(i(b))for(var j=0;j<this.length;j++)this[j]=b instanceof e?b.readUInt8(j):b[j];else if("string"==h)this.length=this.write(b,0,c);else if("number"===h)for(var j=0;j<this.length;j++)this[j]=0}}function f(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function g(a){return a=~~Math.ceil(+a),0>a?0:a}function h(a){return(Array.isArray||function(a){return"[object Array]"=={}.toString.apply(a)})(a)}function i(a){return h(a)||e.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function j(a){return 16>a?"0"+a.toString(16):a.toString(16)}function k(a){for(var b=[],c=0;c<a.length;c++)if(a.charCodeAt(c)<=127)b.push(a.charCodeAt(c));else for(var d=encodeURIComponent(a.charAt(c)).substr(1).split("%"),e=0;e<d.length;e++)b.push(parseInt(d[e],16));return b}function l(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function m(b){return a("base64-js").toByteArray(b)}function n(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);)b[e+c]=a[e],e++;return e}function o(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function p(a,b,c,d){var e=0;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+1<a.length,"Trying to read beyond buffer length")),b>=a.length?0:(c?(e=a[b]<<8,b+1<a.length&&(e|=a[b+1])):(e=a[b],b+1<a.length&&(e|=a[b+1]<<8)),e)}function q(a,b,c,d){var e=0;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+3<a.length,"Trying to read beyond buffer length")),b>=a.length?0:(c?(b+1<a.length&&(e=a[b+1]<<16),b+2<a.length&&(e|=a[b+2]<<8),b+3<a.length&&(e|=a[b+3]),e+=a[b]<<24>>>0):(b+2<a.length&&(e=a[b+2]<<16),b+1<a.length&&(e|=a[b+1]<<8),e|=a[b],b+3<a.length&&(e+=a[b+3]<<24>>>0)),e)}function r(a,b,c,d){var e,f;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+1<a.length,"Trying to read beyond buffer length")),f=p(a,b,c,d),e=32768&f,e?-1*(65535-f+1):f}function s(a,b,c,d){var e,f;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+3<a.length,"Trying to read beyond buffer length")),f=q(a,b,c,d),e=2147483648&f,e?-1*(4294967295-f+1):f}function t(b,c,d,e){return e||(E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(c+3<b.length,"Trying to read beyond buffer length")),a("./buffer_ieee754").readIEEE754(b,c,d,23,4)}function u(b,c,d,e){return e||(E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(c+7<b.length,"Trying to read beyond buffer length")),a("./buffer_ieee754").readIEEE754(b,c,d,52,8)}function v(a,b){E.ok("number"==typeof a,"cannot write a non-number as a number"),E.ok(a>=0,"specified a negative value for writing an unsigned value"),E.ok(b>=a,"value is larger than maximum value for type"),E.ok(Math.floor(a)===a,"value has a fractional component")}function w(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+1<a.length,"trying to write beyond buffer length"),v(b,65535));for(var f=0;f<Math.min(a.length-c,2);f++)a[c+f]=(b&255<<8*(d?1-f:f))>>>8*(d?1-f:f)}function x(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+3<a.length,"trying to write beyond buffer length"),v(b,4294967295));for(var f=0;f<Math.min(a.length-c,4);f++)a[c+f]=b>>>8*(d?3-f:f)&255}function y(a,b,c){E.ok("number"==typeof a,"cannot write a non-number as a number"),E.ok(b>=a,"value larger than maximum allowed value"),E.ok(a>=c,"value smaller than minimum allowed value"),E.ok(Math.floor(a)===a,"value has a fractional component")}function z(a,b,c){E.ok("number"==typeof a,"cannot write a non-number as a number"),E.ok(b>=a,"value larger than maximum allowed value"),E.ok(a>=c,"value smaller than minimum allowed value")}function A(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+1<a.length,"Trying to write beyond buffer length"),y(b,32767,-32768)),b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e)}function B(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+3<a.length,"Trying to write beyond buffer length"),y(b,2147483647,-2147483648)),b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e)}function C(b,c,d,e,f){f||(E.ok(void 0!==c&&null!==c,"missing value"),E.ok("boolean"==typeof e,"missing or invalid endian"),E.ok(void 0!==d&&null!==d,"missing offset"),E.ok(d+3<b.length,"Trying to write beyond buffer length"),z(c,3.4028234663852886e38,-3.4028234663852886e38)),a("./buffer_ieee754").writeIEEE754(b,c,d,e,23,4)}function D(b,c,d,e,f){f||(E.ok(void 0!==c&&null!==c,"missing value"),E.ok("boolean"==typeof e,"missing or invalid endian"),E.ok(void 0!==d&&null!==d,"missing offset"),E.ok(d+7<b.length,"Trying to write beyond buffer length"),z(c,1.7976931348623157e308,-1.7976931348623157e308)),a("./buffer_ieee754").writeIEEE754(b,c,d,e,52,8)}var E;c.Buffer=e,c.SlowBuffer=e,e.poolSize=8192,c.INSPECT_MAX_BYTES=50,e.prototype.get=function(a){if(0>a||a>=this.length)throw new Error("oob");return this[a]},e.prototype.set=function(a,b){if(0>a||a>=this.length)throw new Error("oob");return this[a]=b},e.byteLength=function(a,b){switch(b||"utf8"){case"hex":return a.length/2;case"utf8":case"utf-8":return k(a).length;case"ascii":case"binary":return a.length;case"base64":return m(a).length;default:throw new Error("Unknown encoding")}},e.prototype.utf8Write=function(a,b,c){return e._charsWritten=n(k(a),this,b,c)},e.prototype.asciiWrite=function(a,b,c){return e._charsWritten=n(l(a),this,b,c)},e.prototype.binaryWrite=e.prototype.asciiWrite,e.prototype.base64Write=function(a,b,c){return e._charsWritten=n(m(a),this,b,c)},e.prototype.base64Slice=function(){var b=Array.prototype.slice.apply(this,arguments);return a("base64-js").fromByteArray(b)},e.prototype.utf8Slice=function(){for(var a=Array.prototype.slice.apply(this,arguments),b="",c="",d=0;d<a.length;)a[d]<=127?(b+=o(c)+String.fromCharCode(a[d]),c=""):c+="%"+a[d].toString(16),d++;return b+o(c)},e.prototype.asciiSlice=function(){for(var a=Array.prototype.slice.apply(this,arguments),b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},e.prototype.binarySlice=e.prototype.asciiSlice,e.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=j(this[d]),d==c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},e.prototype.hexSlice=function(a,b){var c=this.length;(!a||0>a)&&(a=0),(!b||0>b||b>c)&&(b=c);for(var d="",e=a;b>e;e++)d+=j(this[e]);return d},e.prototype.toString=function(a,b,c){if(a=String(a||"utf8").toLowerCase(),b=+b||0,"undefined"==typeof c&&(c=this.length),+c==b)return"";switch(a){case"hex":return this.hexSlice(b,c);case"utf8":case"utf-8":return this.utf8Slice(b,c);case"ascii":return this.asciiSlice(b,c);case"binary":return this.binarySlice(b,c);case"base64":return this.base64Slice(b,c);case"ucs2":case"ucs-2":return this.ucs2Slice(b,c);default:throw new Error("Unknown encoding")}},e.prototype.hexWrite=function(a,b,c){b=+b||0;var d=this.length-b;c?(c=+c,c>d&&(c=d)):c=d;var f=a.length;if(f%2)throw new Error("Invalid hex string");c>f/2&&(c=f/2);for(var g=0;c>g;g++){var h=parseInt(a.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");this[b+g]=h}return e._charsWritten=2*g,g},e.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var e=d;d=b,b=c,c=e}b=+b||0;var f=this.length-b;switch(c?(c=+c,c>f&&(c=f)):c=f,d=String(d||"utf8").toLowerCase()){case"hex":return this.hexWrite(a,b,c);case"utf8":case"utf-8":return this.utf8Write(a,b,c);case"ascii":return this.asciiWrite(a,b,c);case"binary":return this.binaryWrite(a,b,c);case"base64":return this.base64Write(a,b,c);case"ucs2":case"ucs-2":return this.ucs2Write(a,b,c);default:throw new Error("Unknown encoding")}},e.prototype.slice=function(a,b){var c=this.length;return a=f(a,c,0),b=f(b,c,c),new e(this,b-a,+a)},e.prototype.copy=function(a,b,c,d){var e=this;if(c||(c=0),(void 0===d||isNaN(d))&&(d=this.length),b||(b=0),c>d)throw new Error("sourceEnd < sourceStart");if(d===c)return 0;if(0==a.length||0==e.length)return 0;if(0>b||b>=a.length)throw new Error("targetStart out of bounds");if(0>c||c>=e.length)throw new Error("sourceStart out of bounds");if(0>d||d>e.length)throw new Error("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);for(var f=[],g=c;d>g;g++)E.ok("undefined"!=typeof this[g],"copying undefined buffer bytes!"),f.push(this[g]);for(var g=b;g<b+f.length;g++)a[g]=f[g-b]},e.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),"number"!=typeof a||isNaN(a))throw new Error("value is not a number");if(b>c)throw new Error("end < start");if(c===b)return 0;if(0==this.length)return 0;if(0>b||b>=this.length)throw new Error("start out of bounds");if(0>c||c>this.length)throw new Error("end out of bounds");for(var d=b;c>d;d++)this[d]=a},e.isBuffer=function(a){return a instanceof e||a instanceof e},e.concat=function(a,b){if(!h(a))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===a.length)return new e(0);if(1===a.length)return a[0];if("number"!=typeof b){b=0;for(var c=0;c<a.length;c++){var d=a[c];b+=d.length}}for(var f=new e(b),g=0,c=0;c<a.length;c++){var d=a[c];d.copy(f,g),g+=d.length}return f},e.isEncoding=function(a){switch((a+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},e.prototype.readUInt8=function(a,b){var c=this;return b||(E.ok(void 0!==a&&null!==a,"missing offset"),E.ok(a<c.length,"Trying to read beyond buffer length")),a>=c.length?void 0:c[a]},e.prototype.readUInt16LE=function(a,b){return p(this,a,!1,b)},e.prototype.readUInt16BE=function(a,b){return p(this,a,!0,b)},e.prototype.readUInt32LE=function(a,b){return q(this,a,!1,b)},e.prototype.readUInt32BE=function(a,b){return q(this,a,!0,b)},e.prototype.readInt8=function(a,b){var c,d=this;return b||(E.ok(void 0!==a&&null!==a,"missing offset"),E.ok(a<d.length,"Trying to read beyond buffer length")),a>=d.length?void 0:(c=128&d[a],c?-1*(255-d[a]+1):d[a])},e.prototype.readInt16LE=function(a,b){return r(this,a,!1,b)},e.prototype.readInt16BE=function(a,b){return r(this,a,!0,b)},e.prototype.readInt32LE=function(a,b){return s(this,a,!1,b)},e.prototype.readInt32BE=function(a,b){return s(this,a,!0,b)},e.prototype.readFloatLE=function(a,b){return t(this,a,!1,b)},e.prototype.readFloatBE=function(a,b){return t(this,a,!0,b)},e.prototype.readDoubleLE=function(a,b){return u(this,a,!1,b)},e.prototype.readDoubleBE=function(a,b){return u(this,a,!0,b)},e.prototype.writeUInt8=function(a,b,c){var d=this;c||(E.ok(void 0!==a&&null!==a,"missing value"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b<d.length,"trying to write beyond buffer length"),v(a,255)),b<d.length&&(d[b]=a)},e.prototype.writeUInt16LE=function(a,b,c){w(this,a,b,!1,c)},e.prototype.writeUInt16BE=function(a,b,c){w(this,a,b,!0,c)},e.prototype.writeUInt32LE=function(a,b,c){x(this,a,b,!1,c)},e.prototype.writeUInt32BE=function(a,b,c){x(this,a,b,!0,c)},e.prototype.writeInt8=function(a,b,c){var d=this;c||(E.ok(void 0!==a&&null!==a,"missing value"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b<d.length,"Trying to write beyond buffer length"),y(a,127,-128)),a>=0?d.writeUInt8(a,b,c):d.writeUInt8(255+a+1,b,c)},e.prototype.writeInt16LE=function(a,b,c){A(this,a,b,!1,c)},e.prototype.writeInt16BE=function(a,b,c){A(this,a,b,!0,c)},e.prototype.writeInt32LE=function(a,b,c){B(this,a,b,!1,c)},e.prototype.writeInt32BE=function(a,b,c){B(this,a,b,!0,c)},e.prototype.writeFloatLE=function(a,b,c){C(this,a,b,!1,c)},e.prototype.writeFloatBE=function(a,b,c){C(this,a,b,!0,c)},e.prototype.writeDoubleLE=function(a,b,c){D(this,a,b,!1,c)},e.prototype.writeDoubleBE=function(a,b,c){D(this,a,b,!0,c)}},{"./buffer_ieee754":14,assert:12,"base64-js":16}],16:[function(a,b){!function(){"use strict";function a(a){var b,c,e,f,g,h;if(a.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(g=a.indexOf("="),g=g>0?a.length-g:0,h=[],e=g>0?a.length-4:a.length,b=0,c=0;e>b;b+=4,c+=3)f=d.indexOf(a[b])<<18|d.indexOf(a[b+1])<<12|d.indexOf(a[b+2])<<6|d.indexOf(a[b+3]),h.push((16711680&f)>>16),h.push((65280&f)>>8),h.push(255&f);return 2===g?(f=d.indexOf(a[b])<<2|d.indexOf(a[b+1])>>4,h.push(255&f)):1===g&&(f=d.indexOf(a[b])<<10|d.indexOf(a[b+1])<<4|d.indexOf(a[b+2])>>2,h.push(f>>8&255),h.push(255&f)),h}function c(a){function b(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[63&a]}var c,e,f,g=a.length%3,h="";for(c=0,f=a.length-g;f>c;c+=3)e=(a[c]<<16)+(a[c+1]<<8)+a[c+2],h+=b(e);switch(g){case 1:e=a[a.length-1],h+=d[e>>2],h+=d[e<<4&63],h+="==";break;case 2:e=(a[a.length-2]<<8)+a[a.length-1],h+=d[e>>10],h+=d[e>>4&63],h+=d[e<<2&63],h+="="}return h}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";b.exports.toByteArray=a,b.exports.fromByteArray=c}()},{}],17:[function(a,b){function c(a,b){if(a.length%g!==0){var c=a.length+(g-a.length%g);a=f.concat([a,h],c)}for(var d=[],e=b?a.readInt32BE:a.readInt32LE,i=0;i<a.length;i+=g)d.push(e.call(a,i));return d}function d(a,b,c){for(var d=new f(b),e=c?d.writeInt32BE:d.writeInt32LE,g=0;g<a.length;g++)e.call(d,a[g],4*g,!0);return d}function e(a,b,e,g){f.isBuffer(a)||(a=new f(a));var h=b(c(a,g),a.length*i);return d(h,e,g)}var f=a("buffer").Buffer,g=4,h=new f(g);h.fill(0);var i=8;b.exports={hash:e}},{buffer:15}],18:[function(a,b,c){function d(a,b,c){h.isBuffer(b)||(b=new h(b)),h.isBuffer(c)||(c=new h(c)),b.length>n?b=a(b):b.length<n&&(b=h.concat([b,o],n));for(var d=new h(n),e=new h(n),f=0;n>f;f++)d[f]=54^b[f],e[f]=92^b[f];var g=a(h.concat([d,c]));return a(h.concat([e,g]))}function e(a,b){a=a||"sha1";var c=m[a],e=[],g=0;return c||f("algorithm:",a,"is not yet supported"),{update:function(a){return h.isBuffer(a)||(a=new h(a)),e.push(a),g+=a.length,this},digest:function(a){var f=h.concat(e),g=b?d(c,b,f):c(f);return e=null,a?g.toString(a):g}}}function f(){var a=[].slice.call(arguments).join(" ");throw new Error([a,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function g(a,b){for(var c in a)b(a[c],c)}var h=a("buffer").Buffer,i=a("./sha"),j=a("./sha256"),k=a("./rng"),l=a("./md5"),m={sha1:i,sha256:j,md5:l},n=64,o=new h(n);o.fill(0),c.createHash=function(a){return e(a)},c.createHmac=function(a,b){return e(a,b)},c.randomBytes=function(a,b){if(!b||!b.call)return new h(k(a));try{b.call(this,void 0,new h(k(a)))}catch(c){b(c)}},g(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(a){c[a]=function(){f("sorry,",a,"is not implemented yet")}})},{"./md5":19,"./rng":20,"./sha":21,"./sha256":22,buffer:15}],19:[function(a,b){function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=j,p=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,o),k=i(k,p)}return Array(c,d,j,k)}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}var k=a("./helpers");b.exports=function(a){return k.hash(a,c,16)}},{"./helpers":17}],20:[function(a,b){!function(){var a,c,d=this;if(a=function(a){for(var b,b,c=new Array(a),d=0;a>d;d++)0==(3&d)&&(b=4294967296*Math.random()),c[d]=b>>>((3&d)<<3)&255;return c},d.crypto&&crypto.getRandomValues){var e=new Uint32Array(4);c=function(a){var b=new Array(a);crypto.getRandomValues(e);for(var c=0;a>c;c++)b[c]=e[c>>2]>>>8*(3&c)&255;return b}}b.exports=c||a}()},{}],21:[function(a,b){function c(a,b){a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;for(var c=Array(80),h=1732584193,i=-271733879,j=-1732584194,k=271733878,l=-1009589776,m=0;m<a.length;m+=16){for(var n=h,o=i,p=j,q=k,r=l,s=0;80>s;s++){c[s]=16>s?a[m+s]:g(c[s-3]^c[s-8]^c[s-14]^c[s-16],1);var t=f(f(g(h,5),d(s,i,j,k)),f(f(l,c[s]),e(s)));l=k,k=j,j=g(i,30),i=h,h=t}h=f(h,n),i=f(i,o),j=f(j,p),k=f(k,q),l=f(l,r)}return Array(h,i,j,k,l)}function d(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d}function e(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function f(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function g(a,b){return a<<b|a>>>32-b}var h=a("./helpers");b.exports=function(a){return h.hash(a,c,20,!0)}},{"./helpers":17}],22:[function(a,b){var c=a("./helpers"),d=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},e=function(a,b){return a>>>b|a<<32-b},f=function(a,b){return a>>>b},g=function(a,b,c){return a&b^~a&c},h=function(a,b,c){return a&b^a&c^b&c},i=function(a){return e(a,2)^e(a,13)^e(a,22)},j=function(a){return e(a,6)^e(a,11)^e(a,25)},k=function(a){return e(a,7)^e(a,18)^f(a,3)},l=function(a){return e(a,17)^e(a,19)^f(a,10)},m=function(a,b){var c,e,f,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;for(var r=0;r<a.length;r+=16){c=w[0],e=w[1],f=w[2],m=w[3],n=w[4],o=w[5],p=w[6],q=w[7];for(var s=0;64>s;s++)x[s]=16>s?a[s+r]:d(d(d(l(x[s-2]),x[s-7]),k(x[s-15])),x[s-16]),t=d(d(d(d(q,j(n)),g(n,o,p)),v[s]),x[s]),u=d(i(c),h(c,e,f)),q=p,p=o,o=n,n=d(m,t),m=f,f=e,e=c,c=d(t,u);w[0]=d(c,w[0]),w[1]=d(e,w[1]),w[2]=d(f,w[2]),w[3]=d(m,w[3]),w[4]=d(n,w[4]),w[5]=d(o,w[5]),w[6]=d(p,w[6]),w[7]=d(q,w[7])}return w};b.exports=function(a){return c.hash(a,m,32,!0)}},{"./helpers":17}],23:[function(){},{}],24:[function(a,b){a=function c(b,d,e){function f(h,i){if(!d[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};b[h][0].call(k.exports,function(a){var c=b[h][1][a];return f(c?c:a)},k,k.exports,c,b,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){c.readIEEE754=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?0:e-1,m=c?1:-1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.writeIEEE754=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?f-1:0,o=d?-1:1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],q9TxCC:[function(a,b,c){function d(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function e(b,c,f){if(E||(E=a("assert")),!(this instanceof e))return new e(b,c,f);if(this.parent=this,this.offset=0,"base64"==c&&"string"==typeof b)for(b=d(b);b.length%4!=0;)b+="=";var h;if("number"==typeof f){this.length=g(c);for(var j=0;j<this.length;j++)this[j]=b.get(j+f)}else{switch(h=typeof b){case"number":this.length=g(b);break;case"string":this.length=e.byteLength(b,c);break;case"object":this.length=g(b.length);break;default:throw new Error("First argument needs to be a number, array or string.")}if(i(b))for(var j=0;j<this.length;j++)this[j]=b instanceof e?b.readUInt8(j):b[j];else if("string"==h)this.length=this.write(b,0,c);else if("number"===h)for(var j=0;j<this.length;j++)this[j]=0}}function f(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function g(a){return a=~~Math.ceil(+a),0>a?0:a}function h(a){return(Array.isArray||function(a){return"[object Array]"=={}.toString.apply(a)})(a)}function i(a){return h(a)||e.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length
}function j(a){return 16>a?"0"+a.toString(16):a.toString(16)}function k(a){for(var b=[],c=0;c<a.length;c++)if(a.charCodeAt(c)<=127)b.push(a.charCodeAt(c));else for(var d=encodeURIComponent(a.charAt(c)).substr(1).split("%"),e=0;e<d.length;e++)b.push(parseInt(d[e],16));return b}function l(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function m(b){return a("base64-js").toByteArray(b)}function n(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);)b[e+c]=a[e],e++;return e}function o(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function p(a,b,c,d){var e=0;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+1<a.length,"Trying to read beyond buffer length")),b>=a.length?0:(c?(e=a[b]<<8,b+1<a.length&&(e|=a[b+1])):(e=a[b],b+1<a.length&&(e|=a[b+1]<<8)),e)}function q(a,b,c,d){var e=0;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+3<a.length,"Trying to read beyond buffer length")),b>=a.length?0:(c?(b+1<a.length&&(e=a[b+1]<<16),b+2<a.length&&(e|=a[b+2]<<8),b+3<a.length&&(e|=a[b+3]),e+=a[b]<<24>>>0):(b+2<a.length&&(e=a[b+2]<<16),b+1<a.length&&(e|=a[b+1]<<8),e|=a[b],b+3<a.length&&(e+=a[b+3]<<24>>>0)),e)}function r(a,b,c,d){var e,f;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+1<a.length,"Trying to read beyond buffer length")),f=p(a,b,c,d),e=32768&f,e?-1*(65535-f+1):f}function s(a,b,c,d){var e,f;return d||(E.ok("boolean"==typeof c,"missing or invalid endian"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b+3<a.length,"Trying to read beyond buffer length")),f=q(a,b,c,d),e=2147483648&f,e?-1*(4294967295-f+1):f}function t(b,c,d,e){return e||(E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(c+3<b.length,"Trying to read beyond buffer length")),a("./buffer_ieee754").readIEEE754(b,c,d,23,4)}function u(b,c,d,e){return e||(E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(c+7<b.length,"Trying to read beyond buffer length")),a("./buffer_ieee754").readIEEE754(b,c,d,52,8)}function v(a,b){E.ok("number"==typeof a,"cannot write a non-number as a number"),E.ok(a>=0,"specified a negative value for writing an unsigned value"),E.ok(b>=a,"value is larger than maximum value for type"),E.ok(Math.floor(a)===a,"value has a fractional component")}function w(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+1<a.length,"trying to write beyond buffer length"),v(b,65535));for(var f=0;f<Math.min(a.length-c,2);f++)a[c+f]=(b&255<<8*(d?1-f:f))>>>8*(d?1-f:f)}function x(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+3<a.length,"trying to write beyond buffer length"),v(b,4294967295));for(var f=0;f<Math.min(a.length-c,4);f++)a[c+f]=b>>>8*(d?3-f:f)&255}function y(a,b,c){E.ok("number"==typeof a,"cannot write a non-number as a number"),E.ok(b>=a,"value larger than maximum allowed value"),E.ok(a>=c,"value smaller than minimum allowed value"),E.ok(Math.floor(a)===a,"value has a fractional component")}function z(a,b,c){E.ok("number"==typeof a,"cannot write a non-number as a number"),E.ok(b>=a,"value larger than maximum allowed value"),E.ok(a>=c,"value smaller than minimum allowed value")}function A(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+1<a.length,"Trying to write beyond buffer length"),y(b,32767,-32768)),b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e)}function B(a,b,c,d,e){e||(E.ok(void 0!==b&&null!==b,"missing value"),E.ok("boolean"==typeof d,"missing or invalid endian"),E.ok(void 0!==c&&null!==c,"missing offset"),E.ok(c+3<a.length,"Trying to write beyond buffer length"),y(b,2147483647,-2147483648)),b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e)}function C(b,c,d,e,f){f||(E.ok(void 0!==c&&null!==c,"missing value"),E.ok("boolean"==typeof e,"missing or invalid endian"),E.ok(void 0!==d&&null!==d,"missing offset"),E.ok(d+3<b.length,"Trying to write beyond buffer length"),z(c,3.4028234663852886e38,-3.4028234663852886e38)),a("./buffer_ieee754").writeIEEE754(b,c,d,e,23,4)}function D(b,c,d,e,f){f||(E.ok(void 0!==c&&null!==c,"missing value"),E.ok("boolean"==typeof e,"missing or invalid endian"),E.ok(void 0!==d&&null!==d,"missing offset"),E.ok(d+7<b.length,"Trying to write beyond buffer length"),z(c,1.7976931348623157e308,-1.7976931348623157e308)),a("./buffer_ieee754").writeIEEE754(b,c,d,e,52,8)}var E;c.Buffer=e,c.SlowBuffer=e,e.poolSize=8192,c.INSPECT_MAX_BYTES=50,e.prototype.get=function(a){if(0>a||a>=this.length)throw new Error("oob");return this[a]},e.prototype.set=function(a,b){if(0>a||a>=this.length)throw new Error("oob");return this[a]=b},e.byteLength=function(a,b){switch(b||"utf8"){case"hex":return a.length/2;case"utf8":case"utf-8":return k(a).length;case"ascii":case"binary":return a.length;case"base64":return m(a).length;default:throw new Error("Unknown encoding")}},e.prototype.utf8Write=function(a,b,c){return e._charsWritten=n(k(a),this,b,c)},e.prototype.asciiWrite=function(a,b,c){return e._charsWritten=n(l(a),this,b,c)},e.prototype.binaryWrite=e.prototype.asciiWrite,e.prototype.base64Write=function(a,b,c){return e._charsWritten=n(m(a),this,b,c)},e.prototype.base64Slice=function(){var b=Array.prototype.slice.apply(this,arguments);return a("base64-js").fromByteArray(b)},e.prototype.utf8Slice=function(){for(var a=Array.prototype.slice.apply(this,arguments),b="",c="",d=0;d<a.length;)a[d]<=127?(b+=o(c)+String.fromCharCode(a[d]),c=""):c+="%"+a[d].toString(16),d++;return b+o(c)},e.prototype.asciiSlice=function(){for(var a=Array.prototype.slice.apply(this,arguments),b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},e.prototype.binarySlice=e.prototype.asciiSlice,e.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=j(this[d]),d==c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},e.prototype.hexSlice=function(a,b){var c=this.length;(!a||0>a)&&(a=0),(!b||0>b||b>c)&&(b=c);for(var d="",e=a;b>e;e++)d+=j(this[e]);return d},e.prototype.toString=function(a,b,c){if(a=String(a||"utf8").toLowerCase(),b=+b||0,"undefined"==typeof c&&(c=this.length),+c==b)return"";switch(a){case"hex":return this.hexSlice(b,c);case"utf8":case"utf-8":return this.utf8Slice(b,c);case"ascii":return this.asciiSlice(b,c);case"binary":return this.binarySlice(b,c);case"base64":return this.base64Slice(b,c);case"ucs2":case"ucs-2":return this.ucs2Slice(b,c);default:throw new Error("Unknown encoding")}},e.prototype.hexWrite=function(a,b,c){b=+b||0;var d=this.length-b;c?(c=+c,c>d&&(c=d)):c=d;var f=a.length;if(f%2)throw new Error("Invalid hex string");c>f/2&&(c=f/2);for(var g=0;c>g;g++){var h=parseInt(a.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");this[b+g]=h}return e._charsWritten=2*g,g},e.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var e=d;d=b,b=c,c=e}b=+b||0;var f=this.length-b;switch(c?(c=+c,c>f&&(c=f)):c=f,d=String(d||"utf8").toLowerCase()){case"hex":return this.hexWrite(a,b,c);case"utf8":case"utf-8":return this.utf8Write(a,b,c);case"ascii":return this.asciiWrite(a,b,c);case"binary":return this.binaryWrite(a,b,c);case"base64":return this.base64Write(a,b,c);case"ucs2":case"ucs-2":return this.ucs2Write(a,b,c);default:throw new Error("Unknown encoding")}},e.prototype.slice=function(a,b){var c=this.length;return a=f(a,c,0),b=f(b,c,c),new e(this,b-a,+a)},e.prototype.copy=function(a,b,c,d){var e=this;if(c||(c=0),(void 0===d||isNaN(d))&&(d=this.length),b||(b=0),c>d)throw new Error("sourceEnd < sourceStart");if(d===c)return 0;if(0==a.length||0==e.length)return 0;if(0>b||b>=a.length)throw new Error("targetStart out of bounds");if(0>c||c>=e.length)throw new Error("sourceStart out of bounds");if(0>d||d>e.length)throw new Error("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);for(var f=[],g=c;d>g;g++)E.ok("undefined"!=typeof this[g],"copying undefined buffer bytes!"),f.push(this[g]);for(var g=b;g<b+f.length;g++)a[g]=f[g-b]},e.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),"number"!=typeof a||isNaN(a))throw new Error("value is not a number");if(b>c)throw new Error("end < start");if(c===b)return 0;if(0==this.length)return 0;if(0>b||b>=this.length)throw new Error("start out of bounds");if(0>c||c>this.length)throw new Error("end out of bounds");for(var d=b;c>d;d++)this[d]=a},e.isBuffer=function(a){return a instanceof e||a instanceof e},e.concat=function(a,b){if(!h(a))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===a.length)return new e(0);if(1===a.length)return a[0];if("number"!=typeof b){b=0;for(var c=0;c<a.length;c++){var d=a[c];b+=d.length}}for(var f=new e(b),g=0,c=0;c<a.length;c++){var d=a[c];d.copy(f,g),g+=d.length}return f},e.isEncoding=function(a){switch((a+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},e.prototype.readUInt8=function(a,b){var c=this;return b||(E.ok(void 0!==a&&null!==a,"missing offset"),E.ok(a<c.length,"Trying to read beyond buffer length")),a>=c.length?void 0:c[a]},e.prototype.readUInt16LE=function(a,b){return p(this,a,!1,b)},e.prototype.readUInt16BE=function(a,b){return p(this,a,!0,b)},e.prototype.readUInt32LE=function(a,b){return q(this,a,!1,b)},e.prototype.readUInt32BE=function(a,b){return q(this,a,!0,b)},e.prototype.readInt8=function(a,b){var c,d=this;return b||(E.ok(void 0!==a&&null!==a,"missing offset"),E.ok(a<d.length,"Trying to read beyond buffer length")),a>=d.length?void 0:(c=128&d[a],c?-1*(255-d[a]+1):d[a])},e.prototype.readInt16LE=function(a,b){return r(this,a,!1,b)},e.prototype.readInt16BE=function(a,b){return r(this,a,!0,b)},e.prototype.readInt32LE=function(a,b){return s(this,a,!1,b)},e.prototype.readInt32BE=function(a,b){return s(this,a,!0,b)},e.prototype.readFloatLE=function(a,b){return t(this,a,!1,b)},e.prototype.readFloatBE=function(a,b){return t(this,a,!0,b)},e.prototype.readDoubleLE=function(a,b){return u(this,a,!1,b)},e.prototype.readDoubleBE=function(a,b){return u(this,a,!0,b)},e.prototype.writeUInt8=function(a,b,c){var d=this;c||(E.ok(void 0!==a&&null!==a,"missing value"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b<d.length,"trying to write beyond buffer length"),v(a,255)),b<d.length&&(d[b]=a)},e.prototype.writeUInt16LE=function(a,b,c){w(this,a,b,!1,c)},e.prototype.writeUInt16BE=function(a,b,c){w(this,a,b,!0,c)},e.prototype.writeUInt32LE=function(a,b,c){x(this,a,b,!1,c)},e.prototype.writeUInt32BE=function(a,b,c){x(this,a,b,!0,c)},e.prototype.writeInt8=function(a,b,c){var d=this;c||(E.ok(void 0!==a&&null!==a,"missing value"),E.ok(void 0!==b&&null!==b,"missing offset"),E.ok(b<d.length,"Trying to write beyond buffer length"),y(a,127,-128)),a>=0?d.writeUInt8(a,b,c):d.writeUInt8(255+a+1,b,c)},e.prototype.writeInt16LE=function(a,b,c){A(this,a,b,!1,c)},e.prototype.writeInt16BE=function(a,b,c){A(this,a,b,!0,c)},e.prototype.writeInt32LE=function(a,b,c){B(this,a,b,!1,c)},e.prototype.writeInt32BE=function(a,b,c){B(this,a,b,!0,c)},e.prototype.writeFloatLE=function(a,b,c){C(this,a,b,!1,c)},e.prototype.writeFloatBE=function(a,b,c){C(this,a,b,!0,c)},e.prototype.writeDoubleLE=function(a,b,c){D(this,a,b,!1,c)},e.prototype.writeDoubleBE=function(a,b,c){D(this,a,b,!0,c)}},{"./buffer_ieee754":1,assert:6,"base64-js":4}],"buffer-browserify":[function(a,b){b.exports=a("q9TxCC")},{}],4:[function(a,b){!function(){"use strict";function a(a){var b,c,e,f,g,h;if(a.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(g=a.indexOf("="),g=g>0?a.length-g:0,h=[],e=g>0?a.length-4:a.length,b=0,c=0;e>b;b+=4,c+=3)f=d.indexOf(a[b])<<18|d.indexOf(a[b+1])<<12|d.indexOf(a[b+2])<<6|d.indexOf(a[b+3]),h.push((16711680&f)>>16),h.push((65280&f)>>8),h.push(255&f);return 2===g?(f=d.indexOf(a[b])<<2|d.indexOf(a[b+1])>>4,h.push(255&f)):1===g&&(f=d.indexOf(a[b])<<10|d.indexOf(a[b+1])<<4|d.indexOf(a[b+2])>>2,h.push(f>>8&255),h.push(255&f)),h}function c(a){function b(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[63&a]}var c,e,f,g=a.length%3,h="";for(c=0,f=a.length-g;f>c;c+=3)e=(a[c]<<16)+(a[c+1]<<8)+a[c+2],h+=b(e);switch(g){case 1:e=a[a.length-1],h+=d[e>>2],h+=d[e<<4&63],h+="==";break;case 2:e=(a[a.length-2]<<8)+a[a.length-1],h+=d[e>>10],h+=d[e>>4&63],h+=d[e<<2&63],h+="="}return h}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";b.exports.toByteArray=a,b.exports.fromByteArray=c}()},{}],5:[function(a,b,c){function d(a){return"[object Array]"===j.call(a)}function e(a,b){var c;if(null===a)c={__proto__:null};else{if("object"!=typeof a)throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return"undefined"!=typeof b&&Object.defineProperties&&Object.defineProperties(c,b),c}function f(a){return"object"!=typeof a&&"function"!=typeof a||null===a}function g(a){if(f(a))throw new TypeError("Object.keys called on a non-object");var b=[];for(var c in a)k.call(a,c)&&b.push(c);return b}function h(a){if(f(a))throw new TypeError("Object.getOwnPropertyNames called on a non-object");var b=g(a);return c.isArray(a)&&-1===c.indexOf(a,"length")&&b.push("length"),b}function i(a,b){return{value:a[b]}}var j=Object.prototype.toString,k=Object.prototype.hasOwnProperty;c.isArray="function"==typeof Array.isArray?Array.isArray:d,c.indexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1},c.filter=function(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c},c.forEach=function(a,b,c){if(a.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)},c.map=function(a,b){if(a.map)return a.map(b);for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=b(a[d],d,a);return c},c.reduce=function(a,b,c){if(a.reduce)return a.reduce(b,c);var d,e=!1;2<arguments.length&&(d=c,e=!0);for(var f=0,g=a.length;g>f;++f)a.hasOwnProperty(f)&&(e?d=b(d,a[f],f,a):(d=a[f],e=!0));return d},c.substr="b"!=="ab".substr(-1)?function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}:function(a,b,c){return a.substr(b,c)},c.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},c.bind=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();if(b.bind)return b.bind.apply(b,a);var c=a.shift();return function(){b.apply(c,a.concat([Array.prototype.slice.call(arguments)]))}},c.create="function"==typeof Object.create?Object.create:e;var l="function"==typeof Object.keys?Object.keys:g,m="function"==typeof Object.getOwnPropertyNames?Object.getOwnPropertyNames:h;if((new Error).hasOwnProperty("description")){var n=function(a,b){return"[object Error]"===j.call(a)&&(b=c.filter(b,function(a){return"description"!==a&&"number"!==a&&"message"!==a})),b};c.keys=function(a){return n(a,l(a))},c.getOwnPropertyNames=function(a){return n(a,m(a))}}else c.keys=l,c.getOwnPropertyNames=m;if("function"==typeof Object.getOwnPropertyDescriptor)try{Object.getOwnPropertyDescriptor({a:1},"a"),c.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor}catch(o){c.getOwnPropertyDescriptor=function(a,b){try{return Object.getOwnPropertyDescriptor(a,b)}catch(c){return i(a,b)}}}else c.getOwnPropertyDescriptor=i},{}],6:[function(a,b){function c(a,b){return m.isUndefined(b)?""+b:!m.isNumber(b)||!isNaN(b)&&isFinite(b)?m.isFunction(b)||m.isRegExp(b)?b.toString():b:b.toString()}function d(a,b){return m.isString(a)?a.length<b?a:a.slice(0,b):a}function e(a){return d(JSON.stringify(a.actual,c),128)+" "+a.operator+" "+d(JSON.stringify(a.expected,c),128)}function f(a,b,c,d,e){throw new p.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function g(a,b){a||f(a,!0,b,"==",p.ok)}function h(a,b){if(a===b)return!0;if(m.isBuffer(a)&&m.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return m.isDate(a)&&m.isDate(b)?a.getTime()===b.getTime():m.isRegExp(a)&&m.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:m.isObject(a)||m.isObject(b)?j(a,b):a==b}function i(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function j(a,b){if(m.isNullOrUndefined(a)||m.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(i(a))return i(b)?(a=o.call(a),b=o.call(b),h(a,b)):!1;try{var c,d,e=n.keys(a),f=n.keys(b)}catch(g){return!1}if(e.length!=f.length)return!1;for(e.sort(),f.sort(),d=e.length-1;d>=0;d--)if(e[d]!=f[d])return!1;for(d=e.length-1;d>=0;d--)if(c=e[d],!h(a[c],b[c]))return!1;return!0}function k(a,b){return a&&b?"[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b?!0:b.call({},a)===!0?!0:!1:!1}function l(a,b,c,d){var e;m.isString(c)&&(d=c,c=null);try{b()}catch(g){e=g}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&f(e,c,"Missing expected exception"+d),!a&&k(e,c)&&f(e,c,"Got unwanted exception"+d),a&&e&&c&&!k(e,c)||!a&&e)throw e}var m=a("util"),n=a("_shims"),o=Array.prototype.slice,p=b.exports=g;p.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,this.message=a.message||e(this)},m.inherits(p.AssertionError,Error),p.fail=f,p.ok=g,p.equal=function(a,b,c){a!=b&&f(a,b,c,"==",p.equal)},p.notEqual=function(a,b,c){a==b&&f(a,b,c,"!=",p.notEqual)},p.deepEqual=function(a,b,c){h(a,b)||f(a,b,c,"deepEqual",p.deepEqual)},p.notDeepEqual=function(a,b,c){h(a,b)&&f(a,b,c,"notDeepEqual",p.notDeepEqual)},p.strictEqual=function(a,b,c){a!==b&&f(a,b,c,"===",p.strictEqual)},p.notStrictEqual=function(a,b,c){a===b&&f(a,b,c,"!==",p.notStrictEqual)},p.throws=function(){l.apply(this,[!0].concat(o.call(arguments)))},p.doesNotThrow=function(){l.apply(this,[!1].concat(o.call(arguments)))},p.ifError=function(a){if(a)throw a}},{_shims:5,util:7}],7:[function(a,b,c){function d(a,b){var d={seen:[],stylize:f};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),o(b)?d.showHidden=b:b&&c._extend(d,b),u(d.showHidden)&&(d.showHidden=!1),u(d.depth)&&(d.depth=2),u(d.colors)&&(d.colors=!1),u(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=e),h(d,a,d.depth)}function e(a,b){var c=d.styles[b];return c?"["+d.colors[c][0]+"m"+a+"["+d.colors[c][1]+"m":a}function f(a){return a}function g(a){var b={};return G.forEach(a,function(a){b[a]=!0}),b}function h(a,b,d){if(a.customInspect&&b&&z(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d);return s(e)||(e=h(a,e,d)),e}var f=i(a,b);if(f)return f;var o=G.keys(b),p=g(o);if(a.showHidden&&(o=G.getOwnPropertyNames(b)),0===o.length){if(z(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(v(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(x(b))return a.stylize(Date.prototype.toString.call(b),"date");if(y(b))return j(b)}var r="",t=!1,u=["{","}"];if(n(b)&&(t=!0,u=["[","]"]),z(b)){var w=b.name?": "+b.name:"";r=" [Function"+w+"]"}if(v(b)&&(r=" "+RegExp.prototype.toString.call(b)),x(b)&&(r=" "+Date.prototype.toUTCString.call(b)),y(b)&&(r=" "+j(b)),0===o.length&&(!t||0==b.length))return u[0]+r+u[1];if(0>d)return v(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var A;return A=t?k(a,b,d,p,o):o.map(function(c){return l(a,b,d,p,c,t)}),a.seen.pop(),m(A,r,u)}function i(a,b){if(u(b))return a.stylize("undefined","undefined");if(s(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return r(b)?a.stylize(""+b,"number"):o(b)?a.stylize(""+b,"boolean"):p(b)?a.stylize("null","null"):void 0}function j(a){return"["+Error.prototype.toString.call(a)+"]"}function k(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(l(a,b,c,d,String(g),!0)):f.push("");return G.forEach(e,function(e){e.match(/^\d+$/)||f.push(l(a,b,c,d,e,!0))}),f}function l(a,b,c,d,e,f){var g,i,j;if(j=G.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?i=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(i=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),i||(G.indexOf(a.seen,j.value)<0?(i=p(c)?h(a,j.value,null):h(a,j.value,c-1),i.indexOf("\n")>-1&&(i=f?i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special")),u(g)){if(f&&e.match(/^\d+$/))return i;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+i}function m(a,b,c){var d=0,e=G.reduce(a,function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function n(a){return G.isArray(a)}function o(a){return"boolean"==typeof a}function p(a){return null===a}function q(a){return null==a}function r(a){return"number"==typeof a}function s(a){return"string"==typeof a}function t(a){return"symbol"==typeof a}function u(a){return void 0===a}function v(a){return w(a)&&"[object RegExp]"===C(a)}function w(a){return"object"==typeof a&&a}function x(a){return w(a)&&"[object Date]"===C(a)}function y(a){return w(a)&&"[object Error]"===C(a)}function z(a){return"function"==typeof a}function A(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function B(a){return a instanceof Buffer}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),I[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=a("_shims"),H=/%[sdj%]/g;c.format=function(a){if(!s(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(d(arguments[c]));return b.join(" ")}for(var c=1,e=arguments,f=e.length,g=String(a).replace(H,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(e[c++]);case"%d":return Number(e[c++]);case"%j":try{return JSON.stringify(e[c++])}catch(b){return"[Circular]"}default:return a}}),h=e[c];f>c;h=e[++c])g+=p(h)||!w(h)?" "+h:" "+d(h);return g},c.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=n,c.isBoolean=o,c.isNull=p,c.isNullOrUndefined=q,c.isNumber=r,c.isString=s,c.isSymbol=t,c.isUndefined=u,c.isRegExp=v,c.isObject=w,c.isDate=x,c.isError=y,c.isFunction=z,c.isPrimitive=A,c.isBuffer=B;var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=function(a,b){a.super_=b,a.prototype=G.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},c._extend=function(a,b){if(!b||!w(b))return a;for(var c=G.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}},{_shims:5}]},{},[]),b.exports=a("buffer-browserify")},{}],25:[function(a,b){var c=a("__browserify_Buffer").Buffer;(function(){function d(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=p[a])});16>e;)b[d+e++]=0;return b}function e(a,b){var c=b||0,d=o;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function f(a,b,c){var d=b&&c||0,f=b||[];a=a||{};var g=null!=a.clockseq?a.clockseq:t,h=null!=a.msecs?a.msecs:(new Date).getTime(),i=null!=a.nsecs?a.nsecs:v+1,j=h-u+(i-v)/1e4;if(0>j&&null==a.clockseq&&(g=g+1&16383),(0>j||h>u)&&null==a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,v=i,t=g,h+=122192928e5;var k=(1e4*(268435455&h)+i)%4294967296;f[d++]=k>>>24&255,f[d++]=k>>>16&255,f[d++]=k>>>8&255,f[d++]=255&k;var l=h/4294967296*1e4&268435455;f[d++]=l>>>8&255,f[d++]=255&l,f[d++]=l>>>24&15|16,f[d++]=l>>>16&255,f[d++]=g>>>8|128,f[d++]=255&g;for(var m=a.node||s,n=0;6>n;n++)f[d+n]=m[n];return b?b:e(f)}function g(a,b,c){var d=b&&c||0;"string"==typeof a&&(b="binary"==a?new n(16):null,a=null),a=a||{};var f=a.random||(a.rng||h)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,b)for(var g=0;16>g;g++)b[d+g]=f[g];return b||e(f)}var h,i=this;if("function"==typeof a)try{var j=a("crypto").randomBytes;h=j&&function(){return j(16)}}catch(k){}if(!h&&i.crypto&&crypto.getRandomValues){var l=new Uint8Array(16);h=function(){return crypto.getRandomValues(l),l}}if(!h){var m=new Array(16);h=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),m[b]=a>>>((3&b)<<3)&255;return m}}for(var n="function"==typeof c?c:Array,o=[],p={},q=0;256>q;q++)o[q]=(q+256).toString(16).substr(1),p[o[q]]=q;var r=h(),s=[1|r[0],r[1],r[2],r[3],r[4],r[5]],t=16383&(r[6]<<8|r[7]),u=0,v=0,w=g;if(w.v1=f,w.v4=g,w.parse=d,w.unparse=e,w.BufferClass=n,"function"==typeof define&&define.amd)define(function(){return w});else if("undefined"!=typeof b&&b.exports)b.exports=w;else{var x=i.uuid;w.noConflict=function(){return i.uuid=x,w},i.uuid=w}}).call(this)},{__browserify_Buffer:24,crypto:18}],26:[function(a,b){"use strict";function c(a){for(var b=c.options,d=b.parser[b.strictMode?"strict":"loose"].exec(a),e={},f=14;f--;)e[b.key[f]]=d[f]||"";return e[b.q.name]={},e[b.key[12]].replace(b.q.parser,function(a,c,d){c&&(e[b.q.name][c]=d)}),e}function d(a){return/^_design/.test(a)?a:encodeURIComponent(a)}function e(a,b){if(/http(s?):/.test(a)){var d=c(a);d.remote=!0,(d.user||d.password)&&(d.auth={username:d.user,password:d.password});var e=d.path.replace(/(^\/|\/$)/g,"").split("/");if(d.db=e.pop(),d.path=e.join("/"),b=b||{},d.headers=b.headers||{},b.auth||d.auth){var f=b.auth||d.auth,g=i.btoa(f.username+":"+f.password);d.headers.Authorization="Basic "+g}return b.headers&&(d.headers=b.headers),d}return{host:"",path:"/",db:a,auth:!1}}function f(a,b){if(a.remote){var c=a.path?"/":"";return a.protocol+"://"+a.host+":"+a.port+"/"+a.path+c+a.db+"/"+b}return"/"+a.db+"/"+b}function g(a,b){if(a.remote){var c=a.path?"/":"";return a.protocol+"://"+a.host+":"+a.port+"/"+a.path+c+b}return"/"+b}function h(a,b){function c(a,b){return i.ajax(i.extend({},l,a),b)}var h=e(a.name,a),j=f(h,""),k={},l=a.ajax||{},m={list:[],get:function(a,b){"function"==typeof a&&(b=a,a={count:10});var d=function(a,c){!a&&"uuids"in c?(m.list=m.list.concat(c.uuids),i.call(b,null,"OK")):i.call(b,a||Pouch.Errors.UNKNOWN_ERROR)},e="?count="+a.count;c({headers:h.headers,method:"GET",url:g(h,"_uuids")+e},d)}},n=function(){c({headers:h.headers,method:"PUT",url:j},function(a){a&&401===a.status?c({headers:h.headers,method:"HEAD",url:j},function(a){a?i.call(b,a):i.call(b,null,k)}):a&&412!==a.status?i.call(b,Pouch.Errors.UNKNOWN_ERROR):i.call(b,null,k)})};return a.skipSetup||c({headers:h.headers,method:"GET",url:j},function(a){a?404===a.status?n():i.call(b,a):i.call(b,null,k)}),k.type=function(){return"http"},k.id=function(){return f(h,"")},k.request=function(a,b){return k.taskqueue.ready()?(a.headers=h.headers,a.url=f(h,a.url),c(a,b),void 0):(k.taskqueue.addTask("request",arguments),void 0)},k.compact=function(a,b){return k.taskqueue.ready()?("function"==typeof a&&(b=a,a={}),c({headers:h.headers,url:f(h,"_compact"),method:"POST"},function(){function c(){k.info(function(d,e){e.compact_running?setTimeout(c,a.interval||200):i.call(b,null)})}"function"==typeof b&&c()}),void 0):(k.taskqueue.addTask("compact",arguments),void 0)},k.info=function(a){return k.taskqueue.ready()?(c({headers:h.headers,method:"GET",url:f(h,"")},a),void 0):(k.taskqueue.addTask("info",arguments),void 0)},k.get=function(a,b,e){if(!k.taskqueue.ready())return k.taskqueue.addTask("get",arguments),void 0;"function"==typeof b&&(e=b,b={}),void 0===b.auto_encode&&(b.auto_encode=!0);var g=[];b.revs&&g.push("revs=true"),b.revs_info&&g.push("revs_info=true"),b.local_seq&&g.push("local_seq=true"),b.open_revs&&("all"!==b.open_revs&&(b.open_revs=JSON.stringify(b.open_revs)),g.push("open_revs="+b.open_revs)),b.attachments&&g.push("attachments=true"),b.rev&&g.push("rev="+b.rev),b.conflicts&&g.push("conflicts="+b.conflicts),g=g.join("&"),g=""===g?"":"?"+g,b.auto_encode&&(a=d(a));var j={headers:h.headers,method:"GET",url:f(h,a+g)},l=a.split("/");(l.length>1&&"_design"!==l[0]&&"_local"!==l[0]||l.length>2&&"_design"===l[0]&&"_local"!==l[0])&&(j.binary=!0),c(j,function(a,b,c){return a?i.call(e,a):(i.call(e,null,b,c),void 0)})},k.remove=function(a,b,e){return k.taskqueue.ready()?("function"==typeof b&&(e=b,b={}),c({headers:h.headers,method:"DELETE",url:f(h,d(a._id))+"?rev="+a._rev},e),void 0):(k.taskqueue.addTask("remove",arguments),void 0)},k.getAttachment=function(a,b,c,e){"function"==typeof c&&(e=c,c={}),void 0===c.auto_encode&&(c.auto_encode=!0),c.auto_encode&&(a=d(a)),c.auto_encode=!1,k.get(a+"/"+b,c,e)},k.removeAttachment=function(a,b,e,g){return k.taskqueue.ready()?(c({headers:h.headers,method:"DELETE",url:f(h,d(a)+"/"+b)+"?rev="+e},g),void 0):(k.taskqueue.addTask("removeAttachment",arguments),void 0)},k.putAttachment=function(a,b,e,g,i,j){if(!k.taskqueue.ready())return k.taskqueue.addTask("putAttachment",arguments),void 0;"function"==typeof i&&(j=i,i=g,g=e,e=null),"undefined"==typeof i&&(i=g,g=e,e=null);var l=d(a)+"/"+b,m=f(h,l);e&&(m+="?rev="+e);var n={headers:h.headers,method:"PUT",url:m,processData:!1,body:g,timeout:6e4};n.headers["Content-Type"]=i,c(n,j)},k.put=function(a,b,e){if(!k.taskqueue.ready())return k.taskqueue.addTask("put",arguments),void 0;if("function"==typeof b&&(e=b,b={}),"object"!=typeof a)return i.call(e,Pouch.Errors.NOT_AN_OBJECT);if(!("_id"in a))return i.call(e,Pouch.Errors.MISSING_ID);var g=[];b&&"undefined"!=typeof b.new_edits&&g.push("new_edits="+b.new_edits),g=g.join("&"),""!==g&&(g="?"+g),c({headers:h.headers,method:"PUT",url:f(h,d(a._id))+g,body:a},e)},k.post=function(a,b,c){return k.taskqueue.ready()?("function"==typeof b&&(c=b,b={}),"object"!=typeof a?i.call(c,Pouch.Errors.NOT_AN_OBJECT):("_id"in a?k.put(a,b,c):m.list.length>0?(a._id=m.list.pop(),k.put(a,b,c)):m.get(function(d){return d?i.call(c,Pouch.Errors.UNKNOWN_ERROR):(a._id=m.list.pop(),k.put(a,b,c),void 0)}),void 0)):(k.taskqueue.addTask("post",arguments),void 0)},k.bulkDocs=function(a,b,d){return k.taskqueue.ready()?("function"==typeof b&&(d=b,b={}),b||(b={}),"undefined"!=typeof b.new_edits&&(a.new_edits=b.new_edits),c({headers:h.headers,method:"POST",url:f(h,"_bulk_docs"),body:a},d),void 0):(k.taskqueue.addTask("bulkDocs",arguments),void 0)},k.allDocs=function(a,b){if(!k.taskqueue.ready())return k.taskqueue.addTask("allDocs",arguments),void 0;"function"==typeof a&&(b=a,a={});var d,e=[],g="GET";a.conflicts&&e.push("conflicts=true"),a.descending&&e.push("descending=true"),a.include_docs&&e.push("include_docs=true"),a.startkey&&e.push("startkey="+encodeURIComponent(JSON.stringify(a.startkey))),a.endkey&&e.push("endkey="+encodeURIComponent(JSON.stringify(a.endkey))),a.limit&&e.push("limit="+a.limit),"undefined"!=typeof a.skip&&e.push("skip="+a.skip),e=e.join("&"),""!==e&&(e="?"+e),"undefined"!=typeof a.keys&&(g="POST",d=JSON.stringify({keys:a.keys})),c({headers:h.headers,method:g,url:f(h,"_all_docs"+e),body:d},b)
},k.changes=function(a){var b=25;if(!k.taskqueue.ready()){var d=k.taskqueue.addTask("changes",arguments);return{cancel:function(){return d.task?d.task.cancel():(Pouch.DEBUG&&console.log(j+": Cancel Changes Feed"),d.parameters[0].aborted=!0,void 0)}}}if("latest"===a.since){var e;return k.info(function(b,c){a.aborted||(a.since=c.update_seq,e=k.changes(a))}),{cancel:function(){return e?e.cancel():(Pouch.DEBUG&&console.log(j+": Cancel Changes Feed"),a.aborted=!0,void 0)}}}Pouch.DEBUG&&console.log(j+": Start Changes Feed: continuous="+a.continuous);var g={},l="undefined"!=typeof a.limit?a.limit:!1;0===l&&(l=1);var m=l;if(a.style&&(g.style=a.style),(a.include_docs||a.filter&&"function"==typeof a.filter)&&(g.include_docs=!0),a.continuous&&(g.feed="longpoll"),a.conflicts&&(g.conflicts=!0),a.descending&&(g.descending=!0),a.filter&&"string"==typeof a.filter&&(g.filter=a.filter),a.query_params&&"object"==typeof a.query_params)for(var n in a.query_params)a.query_params.hasOwnProperty(n)&&(g[n]=a.query_params[n]);var o,p,q,r,s=function(d,e){g.since=d,a.continuous||r||(r=q),g.limit=!l||m>b?b:m;var i="?"+Object.keys(g).map(function(a){return a+"="+g[a]}).join("&"),j={headers:h.headers,method:"GET",url:f(h,"_changes"+i),timeout:null};p=d,a.aborted||(o=c(j,e))},t=10,u=0,v={results:[]},w=function(c,d){if(d&&d.results){v.last_seq=d.last_seq;var e={};e.query=a.query_params,d.results=d.results.filter(function(b){m--;var c=i.filterChange(a)(b);return c&&(v.results.push(b),i.call(a.onChange,b)),c})}d&&d.last_seq&&(p=d.last_seq);var f=d&&d.results.length||0;r-=b;var g=l&&0>=m||d&&!f&&0>=r||f&&d.last_seq===q||a.descending&&0!==p;if(a.continuous||!g){c?u+=1:u=0;var h=1<<u,j=t*h,k=a.maximumWait||3e4;j>k&&i.call(a.complete,c||Pouch.Errors.UNKNOWN_ERROR,null),setTimeout(function(){s(p,w)},j)}else i.call(a.complete,null,v)};return a.continuous?s(a.since||0,w):k.info(function(b,c){return b?i.call(a.complete,b):(q=c.update_seq,s(a.since||0,w),void 0)}),{cancel:function(){Pouch.DEBUG&&console.log(j+": Cancel Changes Feed"),a.aborted=!0,o.abort()}}},k.revsDiff=function(a,b,d){return k.taskqueue.ready()?("function"==typeof b&&(d=b,b={}),c({headers:h.headers,method:"POST",url:f(h,"_revs_diff"),body:a},function(a,b){i.call(d,a,b)}),void 0):(k.taskqueue.addTask("revsDiff",arguments),void 0)},k.close=function(a){return k.taskqueue.ready()?(i.call(a,null),void 0):(k.taskqueue.addTask("close",arguments),void 0)},k.replicateOnServer=function(a,d,f){if(!k.taskqueue.ready())return k.taskqueue.addTask("replicateOnServer",arguments),f;var g=e(a.id()),j={source:h.db,target:g.protocol===h.protocol&&g.authority===h.authority?g.db:g.source};d.continuous&&(j.continuous=!0),d.create_target&&(j.create_target=!0),d.doc_ids&&(j.doc_ids=d.doc_ids),d.filter&&"string"==typeof d.filter&&(j.filter=d.filter),d.query_params&&(j.query_params=d.query_params);var l,m={},n={headers:h.headers,method:"POST",url:h.protocol+"://"+h.host+(80===h.port?"":":"+h.port)+"/_replicate",body:j};f.cancel=function(){this.cancelled=!0,l&&!m.ok&&l.abort(),m._local_id&&(n.body={replication_id:m._local_id}),n.body.cancel=!0,c(n,function(a,c,e){return a?i.call(b,a):(i.call(d.complete,null,m,e),void 0)})},f.cancelled||(l=c(n,function(a,c,e){return a?i.call(b,a):(m.ok=!0,c._local_id&&(m._local_id=c._local_id),i.call(d.complete,null,c,e),void 0)}))},k}var i;"undefined"!=typeof b&&b.exports&&(Pouch=a("../pouch.js"),i=a("../pouch.utils.js"));c.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},h.destroy=function(a,b,c){var d=e(a,b);b=b||{},"function"==typeof b&&(c=b,b={}),b.headers=d.headers,b.method="DELETE",b.url=f(d,""),i.ajax(b,c)},h.valid=function(){return!0},Pouch.adapter("http",h),Pouch.adapter("https",h)},{"../pouch.js":37,"../pouch.utils.js":40}],27:[function(require,module,exports){"use strict";var PouchUtils;"undefined"!=typeof module&&module.exports&&(PouchUtils=require("../pouch.utils.js"));var idbError=function(a){return function(b){PouchUtils.call(a,{status:500,error:b.type,reason:b.target})}},IdbPouch=function(opts,callback){function createSchema(a){a.createObjectStore(DOC_STORE,{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),a.createObjectStore(BY_SEQ_STORE,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),a.createObjectStore(ATTACH_STORE,{keyPath:"digest"}),a.createObjectStore(META_STORE,{keyPath:"id",autoIncrement:!1}),a.createObjectStore(DETECT_BLOB_SUPPORT_STORE)}function fixBinary(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;b>e;e++)d[e]=a.charCodeAt(e);return c}function sortByBulkSeq(a,b){return a._bulk_seq-b._bulk_seq}var POUCH_VERSION=1,DOC_STORE="document-store",BY_SEQ_STORE="by-sequence",ATTACH_STORE="attach-store",META_STORE="meta-store",DETECT_BLOB_SUPPORT_STORE="detect-blob-support",name=opts.name,req=window.indexedDB.open(name,POUCH_VERSION);Pouch.openReqList&&(Pouch.openReqList[name]=req);var blobSupport=null,instanceId=null,api={},idb=null;return Pouch.DEBUG&&console.log(name+": Open Database"),req.onupgradeneeded=function(a){for(var b=a.target.result,c=a.oldVersion;c!==a.newVersion;)0===c&&createSchema(b),c++},req.onsuccess=function(a){idb=a.target.result;var b=idb.transaction([META_STORE,DETECT_BLOB_SUPPORT_STORE],"readwrite");if(idb.onversionchange=function(){idb.close()},idb.setVersion&&Number(idb.version)!==POUCH_VERSION){var c=idb.setVersion(POUCH_VERSION);return c.onsuccess=function(b){function c(){d.onsuccess(a)}b.target.result.oncomplete=c,d.onupgradeneeded(a)},void 0}var d=b.objectStore(META_STORE).get(META_STORE);d.onsuccess=function(a){var c=a.target.result||{id:META_STORE};name+"_id"in c?instanceId=c[name+"_id"]:(instanceId=Pouch.uuid(),c[name+"_id"]=instanceId,b.objectStore(META_STORE).put(c));try{b.objectStore(DETECT_BLOB_SUPPORT_STORE).put(PouchUtils.createBlob(),"key"),blobSupport=!0}catch(d){blobSupport=!1}finally{PouchUtils.call(callback,null,api)}}},req.onerror=idbError(callback),api.type=function(){return"idb"},api.id=function(){return instanceId},api._bulkDocs=function(a,b,c){function d(a){var b=a.target.result;b.updateSeq=(b.updateSeq||0)+t,r.objectStore(META_STORE).put(b)}function e(){if(!p.length)return r.objectStore(META_STORE).get(META_STORE).onsuccess=d,void 0;var a=p.shift(),b=r.objectStore(DOC_STORE).get(a.metadata.id);b.onsuccess=function(b){var c=b.target.result;c?j(c,a):k(a)}}function f(){var a=[];s.sort(sortByBulkSeq),s.forEach(function(b){if(delete b._bulk_seq,b.error)return a.push(b),void 0;var c=b.metadata,d=PouchMerge.winningRev(c);a.push({ok:!0,id:c.id,rev:d}),PouchUtils.isLocalId(c.id)||(IdbPouch.Changes.notify(name),IdbPouch.Changes.notifyLocalWindows(name))}),PouchUtils.call(c,null,a)}function g(a,b){if(a.stub)return b();if("string"==typeof a.data){var d;try{d=atob(a.data)}catch(e){var f=Pouch.error(Pouch.Errors.BAD_ARG,"Attachments need to be base64 encoded");return PouchUtils.call(c,f)}if(a.digest="md5-"+PouchUtils.Crypto.MD5(d),blobSupport){var g=a.content_type;d=fixBinary(d),a.data=PouchUtils.createBlob([d],{type:g})}return b()}var h=new FileReader;h.onloadend=function(){a.digest="md5-"+PouchUtils.Crypto.MD5(this.result),blobSupport||(a.data=btoa(this.result)),b()},h.readAsBinaryString(a.data)}function h(a){function b(){c++,p.length===c&&a()}if(!p.length)return a();var c=0;p.forEach(function(a){function c(){e++,e===d.length&&b()}var d=a.data&&a.data._attachments?Object.keys(a.data._attachments):[];if(!d.length)return b();var e=0;for(var f in a.data._attachments)g(a.data._attachments[f],c)})}function i(a,b){function c(a){f||(a?(f=a,PouchUtils.call(b,f)):g===h.length&&e())}function d(a){g++,c(a)}function e(){a.data._doc_id_rev=a.data._id+"::"+a.data._rev;var c=r.objectStore(BY_SEQ_STORE).put(a.data);c.onsuccess=function(c){Pouch.DEBUG&&console.log(name+": Wrote Document ",a.metadata.id),a.metadata.seq=c.target.result,delete a.metadata.rev;var d=r.objectStore(DOC_STORE).put(a.metadata);d.onsuccess=function(){s.push(a),PouchUtils.call(b)}}}var f=null,g=0;a.data._id=a.metadata.id,a.data._rev=a.metadata.rev,t++,PouchUtils.isDeleted(a.metadata,a.metadata.rev)&&(a.data._deleted=!0);var h=a.data._attachments?Object.keys(a.data._attachments):[];for(var i in a.data._attachments)if(a.data._attachments[i].stub)g++,c();else{var j=a.data._attachments[i].data;delete a.data._attachments[i].data;var k=a.data._attachments[i].digest;m(a,k,j,d)}h.length||e()}function j(a,b){var c=PouchMerge.merge(a.rev_tree,b.metadata.rev_tree[0],1e3),d=PouchUtils.isDeleted(a),f=d&&PouchUtils.isDeleted(b.metadata)||!d&&n&&"new_leaf"!==c.conflicts;return f?(s.push(l(Pouch.Errors.REV_CONFLICT,b._bulk_seq)),e()):(b.metadata.rev_tree=c.tree,i(b,e),void 0)}function k(a){return"was_delete"in b&&PouchUtils.isDeleted(a.metadata)?(s.push(Pouch.Errors.MISSING_DOC),e()):(i(a,e),void 0)}function l(a,b){return a._bulk_seq=b,a}function m(a,b,c,d){{var e=r.objectStore(ATTACH_STORE);e.get(b).onsuccess=function(f){var g=f.target.result&&f.target.result.refs||{},h=[a.metadata.id,a.metadata.rev].join("@"),i={digest:b,body:c,refs:g};i.refs[h]=!0;e.put(i).onsuccess=function(){PouchUtils.call(d)}}}}var n=b.new_edits,o=a.docs,p=o.map(function(a,b){var c=PouchUtils.parseDoc(a,n);return c._bulk_seq=b,c}),q=p.filter(function(a){return a.error});if(q.length)return PouchUtils.call(c,q[0]);var r,s=[],t=0;h(function(){r=idb.transaction([DOC_STORE,BY_SEQ_STORE,ATTACH_STORE,META_STORE],"readwrite"),r.onerror=idbError(c),r.ontimeout=idbError(c),r.oncomplete=f,e()})},api._get=function(a,b,c){function d(){PouchUtils.call(c,g,{doc:e,metadata:f,ctx:h})}var e,f,g,h;h=b.ctx?b.ctx:idb.transaction([DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],"readonly"),h.objectStore(DOC_STORE).get(a).onsuccess=function(a){if(f=a.target.result,!f)return g=Pouch.Errors.MISSING_DOC,d();if(PouchUtils.isDeleted(f)&&!b.rev)return g=Pouch.error(Pouch.Errors.MISSING_DOC,"deleted"),d();var c=PouchMerge.winningRev(f),i=f.id+"::"+(b.rev?b.rev:c),j=h.objectStore(BY_SEQ_STORE).index("_doc_id_rev");j.get(i).onsuccess=function(a){return e=a.target.result,e&&e._doc_id_rev&&delete e._doc_id_rev,e?(d(),void 0):(g=Pouch.Errors.MISSING_DOC,d())}}},api._getAttachment=function(a,b,c){var d,e;e=b.ctx?b.ctx:idb.transaction([DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],"readonly");var f=a.digest,g=a.content_type;e.objectStore(ATTACH_STORE).get(f).onsuccess=function(a){var e=a.target.result.body;if(b.encode)if(blobSupport){var f=new FileReader;f.onloadend=function(){d=btoa(this.result),PouchUtils.call(c,null,d)},f.readAsBinaryString(e)}else d=e,PouchUtils.call(c,null,d);else blobSupport?d=e:(e=fixBinary(atob(e)),d=PouchUtils.createBlob([e],{type:g})),PouchUtils.call(c,null,d)}},api._allDocs=function(a,b){var c="startkey"in a?a.startkey:!1,d="endkey"in a?a.endkey:!1,e="descending"in a?a.descending:!1;e=e?"prev":null;var f=c&&d?window.IDBKeyRange.bound(c,d):c?window.IDBKeyRange.lowerBound(c):d?window.IDBKeyRange.upperBound(d):null,g=idb.transaction([DOC_STORE,BY_SEQ_STORE],"readonly");g.oncomplete=function(){"keys"in a&&(a.keys.forEach(function(a){a in k?j.push(k[a]):j.push({key:a,error:"not_found"})}),a.descending&&j.reverse()),PouchUtils.call(b,null,{total_rows:j.length,offset:a.skip,rows:"limit"in a?j.slice(a.skip,a.limit+a.skip):a.skip>0?j.slice(a.skip):j})};var h=g.objectStore(DOC_STORE),i=e?h.openCursor(f,e):h.openCursor(f),j=[],k={};i.onsuccess=function(b){function c(b,c){if(PouchUtils.isLocalId(b.id))return d["continue"]();var e={id:b.id,key:b.id,value:{rev:PouchMerge.winningRev(b)}};if(a.include_docs){e.doc=c,e.doc._rev=PouchMerge.winningRev(b),e.doc._doc_id_rev&&delete e.doc._doc_id_rev,a.conflicts&&(e.doc._conflicts=PouchMerge.collectConflicts(b));for(var f in e.doc._attachments)e.doc._attachments[f].stub=!0}"keys"in a?a.keys.indexOf(b.id)>-1&&(PouchUtils.isDeleted(b)&&(e.value.deleted=!0,e.doc=null),k[e.id]=e):PouchUtils.isDeleted(b)||j.push(e),d["continue"]()}if(b.target.result){var d=b.target.result,e=d.value;if(a.include_docs){var f=g.objectStore(BY_SEQ_STORE).index("_doc_id_rev"),h=PouchMerge.winningRev(e),i=e.id+"::"+h;f.get(i).onsuccess=function(a){c(d.value,a.target.result)}}else c(e)}}},api._info=function(a){function b(a){e=a.target.result&&a.target.result.updateSeq||0}function c(a){var c=a.target.result;return c?(c.value.deleted!==!0&&d++,c["continue"](),void 0):(f.objectStore(META_STORE).get(META_STORE).onsuccess=b,void 0)}var d=0,e=0,f=idb.transaction([DOC_STORE,META_STORE],"readonly");f.oncomplete=function(){a(null,{db_name:name,doc_count:d,update_seq:e})},f.objectStore(DOC_STORE).openCursor().onsuccess=c},api._changes=function idb_changes(opts){function fetchChanges(){txn=idb.transaction([DOC_STORE,BY_SEQ_STORE]),txn.oncomplete=onTxnComplete;var a;a=descending?txn.objectStore(BY_SEQ_STORE).openCursor(window.IDBKeyRange.lowerBound(opts.since,!0),descending):txn.objectStore(BY_SEQ_STORE).openCursor(window.IDBKeyRange.lowerBound(opts.since,!0)),a.onsuccess=onsuccess,a.onerror=onerror}function onsuccess(a){if(!a.target.result){for(var b=0,c=results.length;c>b;b++){var d=results[b];d&&dedupResults.push(d)}return!1}var e=a.target.result,f=e.value._id,g=resultIndices[f];if(void 0!==g)return results[g].seq=e.key,results.push(results[g]),results[g]=null,resultIndices[f]=results.length-1,e["continue"]();var h=txn.objectStore(DOC_STORE);h.get(e.value._id).onsuccess=function(a){var b=a.target.result;if(PouchUtils.isLocalId(b.id))return e["continue"]();last_seq<b.seq&&(last_seq=b.seq);var c=PouchMerge.winningRev(b),d=b.id+"::"+c,f=txn.objectStore(BY_SEQ_STORE).index("_doc_id_rev");f.get(d).onsuccess=function(a){var d=a.target.result;delete d._doc_id_rev;var f=[{rev:c}];"all_docs"===opts.style&&(f=PouchMerge.collectLeaves(b.rev_tree).map(function(a){return{rev:a.rev}}));var g={id:b.id,seq:e.key,changes:f,doc:d};PouchUtils.isDeleted(b,c)&&(g.deleted=!0),opts.conflicts&&(g.doc._conflicts=PouchMerge.collectConflicts(b));var h=g.id,i=resultIndices[h];void 0!==i&&(results[i]=null),results.push(g),resultIndices[h]=results.length-1,e["continue"]()}}}function onTxnComplete(){PouchUtils.processChanges(opts,dedupResults,last_seq)}function onerror(){PouchUtils.call(opts.complete)}if(Pouch.DEBUG&&console.log(name+": Start Changes Feed: continuous="+opts.continuous),opts.continuous){var id=name+":"+Pouch.uuid();return opts.cancelled=!1,IdbPouch.Changes.addListener(name,id,api,opts),IdbPouch.Changes.notify(name),{cancel:function(){Pouch.DEBUG&&console.log(name+": Cancel Changes Feed"),opts.cancelled=!0,IdbPouch.Changes.removeListener(name,id)}}}var descending=opts.descending?"prev":null,last_seq=0;opts.since=opts.since&&!descending?opts.since:0;var results=[],resultIndices={},dedupResults=[],txn;if(opts.filter&&"string"==typeof opts.filter){var filterName=opts.filter.split("/");api.get("_design/"+filterName[0],function(err,ddoc){var filter=eval("(function() { return "+ddoc.filters[filterName[1]]+" })()");opts.filter=filter,fetchChanges()})}else fetchChanges()},api._close=function(a){return null===idb?PouchUtils.call(a,Pouch.Errors.NOT_OPEN):(idb.close(),PouchUtils.call(a,null),void 0)},api._getRevisionTree=function(a,b){var c=idb.transaction([DOC_STORE],"readonly"),d=c.objectStore(DOC_STORE).get(a);d.onsuccess=function(a){var c=a.target.result;c?PouchUtils.call(b,null,c.rev_tree):PouchUtils.call(b,Pouch.Errors.MISSING_DOC)}},api._doCompaction=function(a,b,c,d){var e=idb.transaction([DOC_STORE,BY_SEQ_STORE],"readwrite"),f=e.objectStore(DOC_STORE);f.get(a).onsuccess=function(d){var f=d.target.result;f.rev_tree=b;var g=c.length;c.forEach(function(b){var c=e.objectStore(BY_SEQ_STORE).index("_doc_id_rev"),d=a+"::"+b;c.getKey(d).onsuccess=function(a){var b=a.target.result;if(b){{e.objectStore(BY_SEQ_STORE)["delete"](b)}g--,g||e.objectStore(DOC_STORE).put(f)}}})},e.oncomplete=function(){PouchUtils.call(d)}},api};IdbPouch.valid=function(){return"undefined"!=typeof window&&!!window.indexedDB},IdbPouch.destroy=function(a,b,c){Pouch.DEBUG&&console.log(a+": Delete Database"),IdbPouch.Changes.clearListeners(a),Pouch.openReqList[a]&&Pouch.openReqList[a].result&&Pouch.openReqList[a].result.close();var d=window.indexedDB.deleteDatabase(a);d.onsuccess=function(){Pouch.openReqList[a]&&(Pouch.openReqList[a]=null),PouchUtils.call(c,null)},d.onerror=idbError(c)},IdbPouch.Changes=new PouchUtils.Changes,Pouch.adapter("idb",IdbPouch)},{"../pouch.utils.js":40}],28:[function(require,module,exports){"use strict";function quote(a){return"'"+a+"'"}var PouchUtils;"undefined"!=typeof module&&module.exports&&(PouchUtils=require("../pouch.utils.js"));var POUCH_VERSION=1,POUCH_SIZE=5242880,DOC_STORE=quote("document-store"),BY_SEQ_STORE=quote("by-sequence"),ATTACH_STORE=quote("attach-store"),META_STORE=quote("metadata-store"),unknownError=function(a){return function(b){PouchUtils.call(a,{status:500,error:b.type,reason:b.target})}},webSqlPouch=function(opts,callback){function dbCreated(){callback(null,api)}function setup(){db.transaction(function(a){var b="CREATE TABLE IF NOT EXISTS "+META_STORE+" (update_seq, dbid)",c="CREATE TABLE IF NOT EXISTS "+ATTACH_STORE+" (digest, json, body BLOB)",d="CREATE TABLE IF NOT EXISTS "+DOC_STORE+" (id unique, seq, json, winningseq)",e="CREATE TABLE IF NOT EXISTS "+BY_SEQ_STORE+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, doc_id_rev UNIQUE, json)";a.executeSql(c),a.executeSql(d),a.executeSql(e),a.executeSql(b);var f="SELECT update_seq FROM "+META_STORE;a.executeSql(f,[],function(a,b){if(!b.rows.length){var c="INSERT INTO "+META_STORE+" (update_seq) VALUES (?)";return a.executeSql(c,[0]),void 0}});var g="SELECT dbid FROM "+META_STORE+" WHERE dbid IS NOT NULL";a.executeSql(g,[],function(a,b){if(!b.rows.length){var c="UPDATE "+META_STORE+" SET dbid=?";return instanceId=Pouch.uuid(),a.executeSql(c,[instanceId]),void 0}instanceId=b.rows.item(0).dbid})},unknownError(callback),dbCreated)}function makeRevs(a){return a.map(function(a){return{rev:a.rev}})}var api={},instanceId=null,name=opts.name,db=openDatabase(name,POUCH_VERSION,name,POUCH_SIZE);return db?(PouchUtils.isCordova()&&"undefined"!=typeof window?window.addEventListener(name+"_pouch",function a(){window.removeEventListener(name+"_pouch",a,!1),setup()},!1):setup(),api.type=function(){return"websql"},api.id=function(){return instanceId},api._info=function(a){db.transaction(function(b){var c="SELECT COUNT(id) AS count FROM "+DOC_STORE;b.executeSql(c,[],function(b,c){var d=c.rows.item(0).count,e="SELECT update_seq FROM "+META_STORE;b.executeSql(e,[],function(b,c){var e=c.rows.item(0).update_seq;a(null,{db_name:name,doc_count:d,update_seq:e})})})})},api._bulkDocs=function(a,b,c){function d(a,b){return a._bulk_seq-b._bulk_seq}function e(){var a=[];u.sort(d),u.forEach(function(b){if(delete b._bulk_seq,b.error)return a.push(b),void 0;var c=b.metadata,d=PouchMerge.winningRev(c);a.push({ok:!0,id:c.id,rev:d}),PouchUtils.isLocalId(c.id)||(q++,webSqlPouch.Changes.notify(name),webSqlPouch.Changes.notifyLocalWindows(name))});var b="SELECT update_seq FROM "+META_STORE;t.executeSql(b,[],function(b,d){var e=d.rows.item(0).update_seq+q,f="UPDATE "+META_STORE+" SET update_seq=?";b.executeSql(f,[e],function(){PouchUtils.call(c,null,a)})})}function f(a,b){if(a.stub)return b();if("string"==typeof a.data){try{a.data=atob(a.data)}catch(d){var e=Pouch.error(Pouch.Errors.BAD_ARG,"Attachments need to be base64 encoded");return PouchUtils.call(c,e)}return a.digest="md5-"+PouchUtils.Crypto.MD5(a.data),b()}var f=new FileReader;f.onloadend=function(){a.data=this.result,a.digest="md5-"+PouchUtils.Crypto.MD5(this.result),b()},f.readAsBinaryString(a.data)}function g(a){function b(){c++,r.length===c&&a()}if(!r.length)return a();var c=0,d=0;r.forEach(function(a){function c(){d++,d===e.length&&b()}var e=a.data&&a.data._attachments?Object.keys(a.data._attachments):[];if(!e.length)return b();for(var g in a.data._attachments)f(a.data._attachments[g],c)})}function h(a,b,c){function d(){var b=a.data,c="INSERT INTO "+BY_SEQ_STORE+" (doc_id_rev, json) VALUES (?, ?);";t.executeSql(c,[b._id+"::"+b._rev,JSON.stringify(b)],g)}function e(a){h||(a?(h=a,PouchUtils.call(b,h)):i===j.length&&d())}function f(a){i++,e(a)}function g(d,e){var f=a.metadata.seq=e.insertId;delete a.metadata.rev;var g=PouchMerge.winningRev(a.metadata),h=c?"UPDATE "+DOC_STORE+" SET seq=?, json=?, winningseq=(SELECT seq FROM "+BY_SEQ_STORE+" WHERE doc_id_rev=?) WHERE id=?":"INSERT INTO "+DOC_STORE+" (id, seq, winningseq, json) VALUES (?, ?, ?, ?);",i=JSON.stringify(a.metadata),j=a.metadata.id+"::"+g,k=c?[f,i,j,a.metadata.id]:[a.metadata.id,f,f,i];d.executeSql(h,k,function(){u.push(a),PouchUtils.call(b,null)})}var h=null,i=0;a.data._id=a.metadata.id,a.data._rev=a.metadata.rev,PouchUtils.isDeleted(a.metadata,a.metadata.rev)&&(a.data._deleted=!0);var j=a.data._attachments?Object.keys(a.data._attachments):[];for(var k in a.data._attachments)if(a.data._attachments[k].stub)i++,e();else{var l=a.data._attachments[k].data;delete a.data._attachments[k].data;var n=a.data._attachments[k].digest;m(a,n,l,f)}j.length||d()}function i(a,b){var c=PouchMerge.merge(a.rev_tree,b.metadata.rev_tree[0],1e3),d=PouchUtils.isDeleted(a)&&PouchUtils.isDeleted(b.metadata)||!PouchUtils.isDeleted(a)&&o&&"new_leaf"!==c.conflicts;return d?(u.push(l(Pouch.Errors.REV_CONFLICT,b._bulk_seq)),k()):(b.metadata.rev_tree=c.tree,h(b,k,!0),void 0)}function j(a){return"was_delete"in b&&PouchUtils.isDeleted(a.metadata)?(u.push(Pouch.Errors.MISSING_DOC),k()):(h(a,k,!1),void 0)}function k(){if(!r.length)return e();var a=r.shift(),b=a.metadata.id;b in v?i(v[b],a):(v[b]=a.metadata,j(a))}function l(a,b){return a._bulk_seq=b,a}function m(a,b,c,d){var e=[a.metadata.id,a.metadata.rev].join("@"),f={digest:b},g="SELECT digest, json FROM "+ATTACH_STORE+" WHERE digest=?";t.executeSql(g,[b],function(a,h){h.rows.length?(f.refs=JSON.parse(h.rows.item(0).json).refs,g="UPDATE "+ATTACH_STORE+" SET json=?, body=? WHERE digest=?",a.executeSql(g,[JSON.stringify(f),c,b],function(){PouchUtils.call(d,null)})):(f.refs={},f.refs[e]=!0,g="INSERT INTO "+ATTACH_STORE+"(digest, json, body) VALUES (?, ?, ?)",a.executeSql(g,[b,JSON.stringify(f),c],function(){PouchUtils.call(d,null)}))})}function n(a,b){for(var c=0;c<b.rows.length;c++){var d=b.rows.item(c);v[d.id]=JSON.parse(d.json)}k()}var o=b.new_edits,p=a.docs,q=0,r=p.map(function(a,b){var c=PouchUtils.parseDoc(a,o);return c._bulk_seq=b,c}),s=r.filter(function(a){return a.error});if(s.length)return PouchUtils.call(c,s[0]);var t,u=[],v={};g(function(){db.transaction(function(a){t=a;var b="("+r.map(function(a){return quote(a.metadata.id)}).join(",")+")",c="SELECT * FROM "+DOC_STORE+" WHERE id IN "+b;t.executeSql(c,[],n)},unknownError(c))})},api._get=function(a,b,c){function d(){PouchUtils.call(c,g,{doc:e,metadata:f,ctx:h})}var e,f,g;if(!b.ctx)return db.transaction(function(d){b.ctx=d,api._get(a,b,c)}),void 0;var h=b.ctx,i="SELECT * FROM "+DOC_STORE+" WHERE id=?";h.executeSql(i,[a],function(a,c){if(!c.rows.length)return g=Pouch.Errors.MISSING_DOC,d();if(f=JSON.parse(c.rows.item(0).json),PouchUtils.isDeleted(f)&&!b.rev)return g=Pouch.error(Pouch.Errors.MISSING_DOC,"deleted"),d();var i=PouchMerge.winningRev(f),j=b.rev?b.rev:i;j=f.id+"::"+j;var k="SELECT * FROM "+BY_SEQ_STORE+" WHERE doc_id_rev=?";h.executeSql(k,[j],function(a,b){return b.rows.length?(e=JSON.parse(b.rows.item(0).json),d(),void 0):(g=Pouch.Errors.MISSING_DOC,d())})})},api._allDocs=function(a,b){var c=[],d={},e="startkey"in a?a.startkey:!1,f="endkey"in a?a.endkey:!1,g="descending"in a?a.descending:!1,h="SELECT "+DOC_STORE+".id, "+BY_SEQ_STORE+".seq, "+BY_SEQ_STORE+".json AS data, "+DOC_STORE+".json AS metadata FROM "+BY_SEQ_STORE+" JOIN "+DOC_STORE+" ON "+BY_SEQ_STORE+".seq = "+DOC_STORE+".winningseq";"keys"in a?h+=" WHERE "+DOC_STORE+".id IN ("+a.keys.map(function(a){return quote(a)}).join(",")+")":(e&&(h+=" WHERE "+DOC_STORE+'.id >= "'+e+'"'),f&&(h+=(e?" AND ":" WHERE ")+DOC_STORE+'.id <= "'+f+'"'),h+=" ORDER BY "+DOC_STORE+".id "+(g?"DESC":"ASC")),db.transaction(function(b){b.executeSql(h,[],function(b,e){for(var f=0,g=e.rows.length;g>f;f++){var h=e.rows.item(f),i=JSON.parse(h.metadata),j=JSON.parse(h.data);if(!PouchUtils.isLocalId(i.id)){if(h={id:i.id,key:i.id,value:{rev:PouchMerge.winningRev(i)}},a.include_docs){h.doc=j,h.doc._rev=PouchMerge.winningRev(i),a.conflicts&&(h.doc._conflicts=PouchMerge.collectConflicts(i));for(var k in h.doc._attachments)h.doc._attachments[k].stub=!0}"keys"in a?a.keys.indexOf(i.id)>-1&&(PouchUtils.isDeleted(i)&&(h.value.deleted=!0,h.doc=null),d[h.id]=h):PouchUtils.isDeleted(i)||c.push(h)}}})},unknownError(b),function(){"keys"in a&&(a.keys.forEach(function(a){a in d?c.push(d[a]):c.push({key:a,error:"not_found"})}),a.descending&&c.reverse()),PouchUtils.call(b,null,{total_rows:c.length,offset:a.skip,rows:"limit"in a?c.slice(a.skip,a.limit+a.skip):a.skip>0?c.slice(a.skip):c})})},api._changes=function idb_changes(opts){function fetchChanges(){var a="SELECT "+DOC_STORE+".id, "+BY_SEQ_STORE+".seq, "+BY_SEQ_STORE+".json AS data, "+DOC_STORE+".json AS metadata FROM "+BY_SEQ_STORE+" JOIN "+DOC_STORE+" ON "+BY_SEQ_STORE+".seq = "+DOC_STORE+".winningseq WHERE "+DOC_STORE+".seq > "+opts.since+" ORDER BY "+DOC_STORE+".seq "+(descending?"DESC":"ASC");db.transaction(function(b){b.executeSql(a,[],function(a,b){for(var c=0,d=0,e=b.rows.length;e>d;d++){var f=b.rows.item(d),g=JSON.parse(f.metadata);if(!PouchUtils.isLocalId(g.id)){c<f.seq&&(c=f.seq);var h=JSON.parse(f.data),i=h._rev,j=[{rev:i}];"all_docs"===opts.style&&(j=makeRevs(PouchMerge.collectLeaves(g.rev_tree)));var k={id:g.id,seq:f.seq,changes:j,doc:h};PouchUtils.isDeleted(g,i)&&(k.deleted=!0),opts.conflicts&&(k.doc._conflicts=PouchMerge.collectConflicts(g)),results.push(k)}}PouchUtils.processChanges(opts,results,c)})})}if(Pouch.DEBUG&&console.log(name+": Start Changes Feed: continuous="+opts.continuous),opts.continuous){var id=name+":"+Pouch.uuid();return opts.cancelled=!1,webSqlPouch.Changes.addListener(name,id,api,opts),webSqlPouch.Changes.notify(name),{cancel:function(){Pouch.DEBUG&&console.log(name+": Cancel Changes Feed"),opts.cancelled=!0,webSqlPouch.Changes.removeListener(name,id)}}}var descending=opts.descending;opts.since=opts.since&&!descending?opts.since:0;var results=[],txn;if(opts.filter&&"string"==typeof opts.filter){var filterName=opts.filter.split("/");api.get("_design/"+filterName[0],function(err,ddoc){var filter=eval("(function() { return "+ddoc.filters[filterName[1]]+" })()");opts.filter=filter,fetchChanges()})}else fetchChanges()},api._close=function(a){PouchUtils.call(a,null)},api._getAttachment=function(a,b,c){var d,e=b.ctx,f=a.digest,g=a.content_type,h="SELECT body FROM "+ATTACH_STORE+" WHERE digest=?";e.executeSql(h,[f],function(a,e){var f=e.rows.item(0).body;d=b.encode?btoa(f):PouchUtils.createBlob([f],{type:g}),PouchUtils.call(c,null,d)})},api._getRevisionTree=function(a,b){db.transaction(function(c){var d="SELECT json AS metadata FROM "+DOC_STORE+" WHERE id = ?";c.executeSql(d,[a],function(a,c){if(c.rows.length){var d=JSON.parse(c.rows.item(0).metadata);PouchUtils.call(b,null,d.rev_tree)}else PouchUtils.call(b,Pouch.Errors.MISSING_DOC)})})},api._doCompaction=function(a,b,c,d){db.transaction(function(e){var f="SELECT json AS metadata FROM "+DOC_STORE+" WHERE id = ?";e.executeSql(f,[a],function(e,f){if(!f.rows.length)return PouchUtils.call(d);var g=JSON.parse(f.rows.item(0).metadata);g.rev_tree=b;var h="DELETE FROM "+BY_SEQ_STORE+" WHERE doc_id_rev IN ("+c.map(function(b){return quote(a+"::"+b)}).join(",")+")";e.executeSql(h,[],function(b){var c="UPDATE "+DOC_STORE+" SET json = ? WHERE id = ?";b.executeSql(c,[JSON.stringify(g),a],function(){d()})})})})},api):PouchUtils.call(callback,Pouch.Errors.UNKNOWN_ERROR)};webSqlPouch.valid=function(){return"undefined"!=typeof window&&!!window.openDatabase},webSqlPouch.destroy=function(a,b,c){var d=openDatabase(a,POUCH_VERSION,a,POUCH_SIZE);d.transaction(function(a){a.executeSql("DROP TABLE IF EXISTS "+DOC_STORE,[]),a.executeSql("DROP TABLE IF EXISTS "+BY_SEQ_STORE,[]),a.executeSql("DROP TABLE IF EXISTS "+ATTACH_STORE,[]),a.executeSql("DROP TABLE IF EXISTS "+META_STORE,[])},unknownError(c),function(){PouchUtils.call(c,null)})},webSqlPouch.Changes=new PouchUtils.Changes,Pouch.adapter("websql",webSqlPouch)},{"../pouch.utils.js":40}],29:[function(a,b){var c,d,e;"undefined"!=typeof b&&b.exports&&(c=a("request"),d=a("./extend.js"),e=a("./blob.js"));var f=function(a,b){function f(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"}"function"==typeof a&&(b=a,a={});var g=function(a){var b=Array.prototype.slice.call(arguments,1);typeof a==typeof Function&&a.apply(this,b)},h={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4};a=d(!0,h,a);var i=function(b,c,d){if(a.binary||a.json||!a.processData||"string"==typeof b){if(!a.binary&&a.json&&"string"==typeof b)try{b=JSON.parse(b)}catch(e){return g(d,e),void 0}}else b=JSON.stringify(b);g(d,null,b,c)},j=function(a,b){var c,e={status:a.status};try{c=JSON.parse(a.responseText),e=d(!0,{},e,c)}catch(f){}g(b,e)};if("undefined"!=typeof window&&window.XMLHttpRequest){var k,l=!1,m=new XMLHttpRequest;m.open(a.method,a.url),m.withCredentials=!0,a.json&&(a.headers.Accept="application/json",a.headers["Content-Type"]=a.headers["Content-Type"]||"application/json",a.body&&a.processData&&"string"!=typeof a.body&&(a.body=JSON.stringify(a.body))),a.binary&&(m.responseType="arraybuffer");for(var n in a.headers)if("Cookie"===n){var o=a.headers[n].split("=");f(o[0],o[1],10)}else m.setRequestHeader(n,a.headers[n]);"body"in a||(a.body=null);var p=function(){l=!0,m.abort(),g(j,m,b)};return m.onreadystatechange=function(){if(4===m.readyState&&!l)if(clearTimeout(k),m.status>=200&&m.status<300){var c;c=a.binary?e([m.response||""],{type:m.getResponseHeader("Content-Type")}):m.responseText,g(i,c,m,b)}else g(j,m,b)},a.timeout>0&&(k=setTimeout(p,a.timeout)),m.send(a.body),{abort:p}}return a.json&&(a.binary||(a.headers.Accept="application/json"),a.headers["Content-Type"]=a.headers["Content-Type"]||"application/json"),a.binary&&(a.encoding=null,a.json=!1),a.processData||(a.json=!1),c(a,function(c,d,e){if(c)return c.status=d?d.statusCode:400,g(j,c,b);var f=d.headers["content-type"],h=e||"";a.binary||!a.json&&a.processData||"object"==typeof h||!(/json/.test(f)||/^[\s]*\{/.test(h)&&/\}[\s]*$/.test(h))||(h=JSON.parse(h)),d.statusCode>=200&&d.statusCode<300?g(i,h,d,b):(a.binary&&(h=JSON.parse(h.toString())),h.status=d.statusCode,g(b,h))})};"undefined"!=typeof b&&b.exports&&(b.exports=f)},{"./blob.js":30,"./extend.js":31,request:23}],30:[function(a,b){function c(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(c){if("TypeError"!==c.name)throw c;for(var d=window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder,e=new d,f=0;f<a.length;f+=1)e.append(a[f]);return e.getBlob(b.type)}}"undefined"!=typeof b&&b.exports&&(b.exports=c)},{}],31:[function(a,b){for(var c={},d=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],e=0;e<d.length;e++){var f=d[e];c["[object "+f+"]"]=f.toLowerCase()}var g=c.toString,h=c.hasOwnProperty,i=function(a){return null===a?String(a):"object"==typeof a||"function"==typeof a?c[g.call(a)]||"object":typeof a},j=function(a){return null!==a&&a===a.window},k=function(a){if(!a||"object"!==i(a)||a.nodeType||j(a))return!1;try{if(a.constructor&&!h.call(a,"constructor")&&!h.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}var c;for(c in a);return void 0===c||h.call(a,c)},l=function(a){return"function"===i(a)},m=Array.isArray||function(a){return"array"===i(a)
},n=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[1]||{},h=2),"object"==typeof g||l(g)||(g={}),i===h&&(g=this,--h);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(k(d)||(e=m(d)))?(e?(e=!1,f=c&&m(c)?c:[]):f=c&&k(c)?c:{},g[b]=n(j,f,d)):void 0!==d&&(m(a)&&l(d)||(g[b]=d)));return g};"undefined"!=typeof b&&b.exports&&(b.exports=n)},{}],32:[function(a,b){var c={};!function(){c.MD5=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}var n,o,p,q,r,s,t,u,v,w=Array(),x=7,y=12,z=17,A=22,B=5,C=9,D=14,E=20,F=4,G=11,H=16,I=23,J=6,K=10,L=15,M=21;for(w=l(a),s=1732584193,t=4023233417,u=2562383102,v=271733878,n=0;n<w.length;n+=16)o=s,p=t,q=u,r=v,s=h(s,t,u,v,w[n+0],x,3614090360),v=h(v,s,t,u,w[n+1],y,3905402710),u=h(u,v,s,t,w[n+2],z,606105819),t=h(t,u,v,s,w[n+3],A,3250441966),s=h(s,t,u,v,w[n+4],x,4118548399),v=h(v,s,t,u,w[n+5],y,1200080426),u=h(u,v,s,t,w[n+6],z,2821735955),t=h(t,u,v,s,w[n+7],A,4249261313),s=h(s,t,u,v,w[n+8],x,1770035416),v=h(v,s,t,u,w[n+9],y,2336552879),u=h(u,v,s,t,w[n+10],z,4294925233),t=h(t,u,v,s,w[n+11],A,2304563134),s=h(s,t,u,v,w[n+12],x,1804603682),v=h(v,s,t,u,w[n+13],y,4254626195),u=h(u,v,s,t,w[n+14],z,2792965006),t=h(t,u,v,s,w[n+15],A,1236535329),s=i(s,t,u,v,w[n+1],B,4129170786),v=i(v,s,t,u,w[n+6],C,3225465664),u=i(u,v,s,t,w[n+11],D,643717713),t=i(t,u,v,s,w[n+0],E,3921069994),s=i(s,t,u,v,w[n+5],B,3593408605),v=i(v,s,t,u,w[n+10],C,38016083),u=i(u,v,s,t,w[n+15],D,3634488961),t=i(t,u,v,s,w[n+4],E,3889429448),s=i(s,t,u,v,w[n+9],B,568446438),v=i(v,s,t,u,w[n+14],C,3275163606),u=i(u,v,s,t,w[n+3],D,4107603335),t=i(t,u,v,s,w[n+8],E,1163531501),s=i(s,t,u,v,w[n+13],B,2850285829),v=i(v,s,t,u,w[n+2],C,4243563512),u=i(u,v,s,t,w[n+7],D,1735328473),t=i(t,u,v,s,w[n+12],E,2368359562),s=j(s,t,u,v,w[n+5],F,4294588738),v=j(v,s,t,u,w[n+8],G,2272392833),u=j(u,v,s,t,w[n+11],H,1839030562),t=j(t,u,v,s,w[n+14],I,4259657740),s=j(s,t,u,v,w[n+1],F,2763975236),v=j(v,s,t,u,w[n+4],G,1272893353),u=j(u,v,s,t,w[n+7],H,4139469664),t=j(t,u,v,s,w[n+10],I,3200236656),s=j(s,t,u,v,w[n+13],F,681279174),v=j(v,s,t,u,w[n+0],G,3936430074),u=j(u,v,s,t,w[n+3],H,3572445317),t=j(t,u,v,s,w[n+6],I,76029189),s=j(s,t,u,v,w[n+9],F,3654602809),v=j(v,s,t,u,w[n+12],G,3873151461),u=j(u,v,s,t,w[n+15],H,530742520),t=j(t,u,v,s,w[n+2],I,3299628645),s=k(s,t,u,v,w[n+0],J,4096336452),v=k(v,s,t,u,w[n+7],K,1126891415),u=k(u,v,s,t,w[n+14],L,2878612391),t=k(t,u,v,s,w[n+5],M,4237533241),s=k(s,t,u,v,w[n+12],J,1700485571),v=k(v,s,t,u,w[n+3],K,2399980690),u=k(u,v,s,t,w[n+10],L,4293915773),t=k(t,u,v,s,w[n+1],M,2240044497),s=k(s,t,u,v,w[n+8],J,1873313359),v=k(v,s,t,u,w[n+15],K,4264355552),u=k(u,v,s,t,w[n+6],L,2734768916),t=k(t,u,v,s,w[n+13],M,1309151649),s=k(s,t,u,v,w[n+4],J,4149444226),v=k(v,s,t,u,w[n+11],K,3174756917),u=k(u,v,s,t,w[n+2],L,718787259),t=k(t,u,v,s,w[n+9],M,3951481745),s=c(s,o),t=c(t,p),u=c(u,q),v=c(v,r);var N=m(s)+m(t)+m(u)+m(v);return N.toLowerCase()}}(),"undefined"!=typeof b&&b.exports&&(b.exports=c)},{}],33:[function(a,b){var c;!function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");c=function(b,c){var d,e=a,f=[];if(c=c||e.length,b)for(d=0;b>d;d++)f[d]=e[0|Math.random()*c];else{var g;for(f[8]=f[13]=f[18]=f[23]="-",f[14]="4",d=0;36>d;d++)f[d]||(g=0|16*Math.random(),f[d]=e[19==d?3&g|8:g])}return f.join("")}}(),"undefined"!=typeof b&&b.exports&&(b.exports=c)},{}],34:[function(require,module,exports){"use strict";var pouchCollate;"undefined"!=typeof module&&module.exports&&(pouchCollate=require("../pouch.collate.js"));var MapReduce=function(db){function viewQuery(fun,options){function sum(a){return a.reduce(function(a,b){return a+b},0)}if(options.complete){options.skip||(options.skip=0),fun.reduce||(options.reduce=!1);var builtInReduce={_sum:function(a,b){return sum(b)},_count:function(a,b,c){return c?sum(b):b.length},_stats:function(a,b){return{sum:sum(b),min:Math.min.apply(null,b),max:Math.max.apply(null,b),count:b.length,sumsqr:function(){var a=0;for(var c in b)"number"==typeof b[c]&&(a+=b[c]*b[c]);return a}()}}},results=[],current=null,num_started=0,completed=!1,emit=function(a,b){var c={id:current.doc._id,key:a,value:b};if(!(options.startkey&&pouchCollate(a,options.startkey)<0||options.endkey&&pouchCollate(a,options.endkey)>0||options.key&&0!==pouchCollate(a,options.key))){if(num_started++,options.include_docs){if(b&&"object"==typeof b&&b._id)return db.get(b._id,function(a,b){b&&(c.doc=b),results.push(c),checkComplete()}),void 0;c.doc=current.doc}results.push(c)}};eval("fun.map = "+fun.map.toString()+";"),fun.reduce&&(builtInReduce[fun.reduce]&&(fun.reduce=builtInReduce[fun.reduce]),eval("fun.reduce = "+fun.reduce.toString()+";"));var checkComplete=function(){if(completed&&results.length==num_started){if(results.sort(function(a,b){return pouchCollate(a.key,b.key)}),options.descending&&results.reverse(),options.reduce===!1)return options.complete(null,{total_rows:results.length,offset:options.skip,rows:"limit"in options?results.slice(options.skip,options.limit+options.skip):options.skip>0?results.slice(options.skip):results});var a=[];results.forEach(function(b){var c=a[a.length-1]||null;return c&&0===pouchCollate(c.key[0][0],b.key)?(c.key.push([b.key,b.id]),c.value.push(b.value),void 0):(a.push({key:[[b.key,b.id]],value:[b.value]}),void 0)}),a.forEach(function(a){a.value=fun.reduce(a.key,a.value),a.value="undefined"==typeof a.value?null:a.value,a.key=a.key[0][0]}),options.complete(null,{total_rows:a.length,offset:options.skip,rows:"limit"in options?a.slice(options.skip,options.limit+options.skip):options.skip>0?a.slice(options.skip):a})}};db.changes({conflicts:!0,include_docs:!0,onChange:function(a){"deleted"in a||(current={doc:a.doc},fun.map.call(this,a.doc))},complete:function(){completed=!0,checkComplete()}})}}function httpQuery(a,b,c){var d=[],e=void 0,f="GET";if("undefined"!=typeof b.reduce&&d.push("reduce="+b.reduce),"undefined"!=typeof b.include_docs&&d.push("include_docs="+b.include_docs),"undefined"!=typeof b.limit&&d.push("limit="+b.limit),"undefined"!=typeof b.descending&&d.push("descending="+b.descending),"undefined"!=typeof b.startkey&&d.push("startkey="+encodeURIComponent(JSON.stringify(b.startkey))),"undefined"!=typeof b.endkey&&d.push("endkey="+encodeURIComponent(JSON.stringify(b.endkey))),"undefined"!=typeof b.key&&d.push("key="+encodeURIComponent(JSON.stringify(b.key))),"undefined"!=typeof b.group&&d.push("group="+b.group),"undefined"!=typeof b.group_level&&d.push("group_level="+b.group_level),"undefined"!=typeof b.skip&&d.push("skip="+b.skip),"undefined"!=typeof b.keys&&(f="POST",e=JSON.stringify({keys:b.keys})),d=d.join("&"),d=""===d?"":"?"+d,"string"==typeof a){var g=a.split("/");return db.request({method:f,url:"_design/"+g[0]+"/_view/"+g[1]+d,body:e},c),void 0}var h=JSON.parse(JSON.stringify(a,function(a,b){return"function"==typeof b?b+"":b}));db.request({method:"POST",url:"_temp_view"+d,body:h},c)}function query(a,b,c){if("function"==typeof b&&(c=b,b={}),c&&(b.complete=c),"http"===db.type())return"function"==typeof a?httpQuery({map:a},b,c):httpQuery(a,b,c);if("object"==typeof a)return viewQuery(a,b);if("function"==typeof a)return viewQuery({map:a},b);var d=a.split("/");db.get("_design/"+d[0],function(a,e){return a?(c&&c(a),void 0):e.views[d[1]]?(viewQuery({map:e.views[d[1]].map,reduce:e.views[d[1]].reduce},b),void 0):(c&&c({error:"not_found",reason:"missing_named_view"}),void 0)})}return{query:query}};MapReduce._delete=function(){},Pouch.plugin("mapreduce",MapReduce)},{"../pouch.collate.js":36}],35:[function(a,b){"use strict";function c(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c)===!0)return a[c];return!1}function d(a){return function(b,c){b||c[0].error?h(a,b||c[0]):h(a,null,c[0])}}function e(a){var b={},c=[];return PouchMerge.traverseRevTree(a,function(a,d,e,f){var g=d+"-"+e;return a&&(b[g]=0),void 0!==f&&c.push({from:f,to:g}),g}),c.reverse(),c.forEach(function(a){b[a.from]=void 0===b[a.from]?1+b[a.to]:Math.min(b[a.from],1+b[a.to])}),b}var f,g;"undefined"!=typeof b&&b.exports&&(g=a("./pouch.utils.js"));var h=g.call;f=function(a,b){var f={},i=Pouch.adapters[a.adapter](a,function(c,d){if(c)return b&&b(c),void 0;for(var e in f)d.hasOwnProperty(e)||(d[e]=f[e]);a.name===Pouch.prefix+Pouch.ALL_DBS?b(c,d):Pouch.open(a,function(a){b(a,d)})}),j=a.auto_compaction===!0,k=function(a){return j?function(b,c){if(b)h(a,b);else{var d=c.length,e=function(){d--,d||h(a,null,c)};c.forEach(function(a){a.ok?l(a.id,1,e):e()})}}:a};f.post=function(a,b,c){return"function"==typeof b&&(c=b,b={}),"object"!=typeof a||Array.isArray(a)?h(c,Pouch.Errors.NOT_AN_OBJECT):i.bulkDocs({docs:[a]},b,k(d(c)))},f.put=function(a,b,c){return"function"==typeof b&&(c=b,b={}),"object"!=typeof a?h(c,Pouch.Errors.NOT_AN_OBJECT):"_id"in a?i.bulkDocs({docs:[a]},b,k(d(c))):h(c,Pouch.Errors.MISSING_ID)},f.putAttachment=function(a,b,c,d,e,g){function i(a){a._attachments=a._attachments||{},a._attachments[b]={content_type:e,data:d},f.put(a,g)}return f.taskqueue.ready()?("function"==typeof e&&(g=e,e=d,d=c,c=null),"undefined"==typeof e&&(e=d,d=c,c=null),f.get(a,function(b,d){return b&&b.error===Pouch.Errors.MISSING_DOC.error?(i({_id:a}),void 0):b?(h(g,b),void 0):d._rev!==c?(h(g,Pouch.Errors.REV_CONFLICT),void 0):(i(d),void 0)}),void 0):(f.taskqueue.addTask("putAttachment",arguments),void 0)},f.removeAttachment=function(a,b,c,d){f.get(a,function(a,e){return a?(h(d,a),void 0):e._rev!==c?(h(d,Pouch.Errors.REV_CONFLICT),void 0):e._attachments?(delete e._attachments[b],0===Object.keys(e._attachments).length&&delete e._attachments,f.put(e,d),void 0):h(d,null)})},f.remove=function(a,b,c){"function"==typeof b&&(c=b,b={}),void 0===b&&(b={}),b.was_delete=!0;var e={_id:a._id,_rev:a._rev};return e._deleted=!0,i.bulkDocs({docs:[e]},b,d(c))},f.revsDiff=function(a,b,c){function d(a,b){j[a]||(j[a]={missing:[]}),j[a].missing.push(b)}function e(b,c){var e=a[b].slice(0);PouchMerge.traverseRevTree(c,function(a,c,f,g,h){var i=c+"-"+f,j=e.indexOf(i);-1!==j&&(e.splice(j,1),"available"!==h.status&&d(b,i))}),e.forEach(function(a){d(b,a)})}"function"==typeof b&&(c=b,b={});var f=Object.keys(a),g=0,j={};f.map(function(b){i._getRevisionTree(b,function(d,i){if(d&&"not_found"===d.error&&"missing"===d.reason)j[b]={missing:a[b]};else{if(d)return h(c,d);e(b,i)}return++g===f.length?h(c,null,j):void 0})})};var l=function(a,b,c){i._getRevisionTree(a,function(d,f){if(d)return h(c);var g=e(f),j=[],k=[];Object.keys(g).forEach(function(a){g[a]>b&&j.push(a)}),PouchMerge.traverseRevTree(f,function(a,b,c,d,e){var f=b+"-"+c;"available"===e.status&&-1!==j.indexOf(f)&&(e.status="missing",k.push(f))}),i._doCompaction(a,f,k,c)})};f.compact=function(a,b){"function"==typeof a&&(b=a,a={}),f.changes({complete:function(a,c){if(a)return h(b),void 0;var d=c.results.length;return d?(c.results.forEach(function(a){l(a.id,0,function(){d--,d||h(b)})}),void 0):(h(b),void 0)}})},f.get=function(a,b,d){function e(){var c=[],e=g.length;return e?(g.forEach(function(g){f.get(a,{rev:g,revs:b.revs},function(a,b){a?c.push({missing:g}):c.push({ok:b}),e--,e||h(d,null,c)})}),void 0):h(d,null,c)}if(!f.taskqueue.ready())return f.taskqueue.addTask("get",arguments),void 0;"function"==typeof b&&(d=b,b={});var g=[];{if(!b.open_revs)return i._get(a,b,function(a,e){if(a)return h(d,a);var f=e.doc,g=e.metadata,j=e.ctx;if(b.conflicts){var k=PouchMerge.collectConflicts(g);k.length&&(f._conflicts=k)}if(b.revs||b.revs_info){var l=PouchMerge.rootToLeaf(g.rev_tree),m=c(l,function(a){return-1!==a.ids.map(function(a){return a.id}).indexOf(f._rev.split("-")[1])});if(m.ids.splice(m.ids.map(function(a){return a.id}).indexOf(f._rev.split("-")[1])+1),m.ids.reverse(),b.revs&&(f._revisions={start:m.pos+m.ids.length-1,ids:m.ids.map(function(a){return a.id})}),b.revs_info){var n=m.pos+m.ids.length;f._revs_info=m.ids.map(function(a){return n--,{rev:n+"-"+a.id,status:a.opts.status}})}}if(b.local_seq&&(f._local_seq=e.metadata.seq),b.attachments&&f._attachments){var o=f._attachments,p=Object.keys(o).length;if(0===p)return h(d,null,f);Object.keys(o).forEach(function(a){i._getAttachment(o[a],{encode:!0,ctx:j},function(b,c){f._attachments[a].data=c,--p||h(d,null,f)})})}else{if(f._attachments)for(var q in f._attachments)f._attachments[q].stub=!0;h(d,null,f)}});if("all"===b.open_revs)i._getRevisionTree(a,function(a,b){a&&(b=[]),g=PouchMerge.collectLeaves(b).map(function(a){return a.rev}),e()});else{if(!Array.isArray(b.open_revs))return h(d,Pouch.error(Pouch.Errors.UNKNOWN_ERROR,"function_clause"));g=b.open_revs;for(var j=0;j<g.length;j++){var k=g[j];if("string"!=typeof k||!/^\d+-/.test(k))return h(d,Pouch.error(Pouch.Errors.BAD_REQUEST,"Invalid rev format"))}e()}}},f.getAttachment=function(a,b,c,d){return f.taskqueue.ready()?(c instanceof Function&&(d=c,c={}),i._get(a,c,function(a,e){return a?h(d,a):e.doc._attachments&&e.doc._attachments[b]?(c.ctx=e.ctx,i._getAttachment(e.doc._attachments[b],c,d),void 0):h(d,Pouch.Errors.MISSING_DOC)}),void 0):(f.taskqueue.addTask("getAttachment",arguments),void 0)},f.allDocs=function(a,b){if(!f.taskqueue.ready())return f.taskqueue.addTask("allDocs",arguments),void 0;if("function"==typeof a&&(b=a,a={}),"keys"in a){if("startkey"in a)return h(b,Pouch.error(Pouch.Errors.QUERY_PARSE_ERROR,"Query parameter `start_key` is not compatible with multi-get")),void 0;if("endkey"in a)return h(b,Pouch.error(Pouch.Errors.QUERY_PARSE_ERROR,"Query parameter `end_key` is not compatible with multi-get")),void 0}return"undefined"==typeof a.skip&&(a.skip=0),i._allDocs(a,b)},f.changes=function(a){if(!f.taskqueue.ready()){var b=f.taskqueue.addTask("changes",arguments);return{cancel:function(){return b.task?b.task.cancel():(Pouch.DEBUG&&console.log("Cancel Changes Feed"),b.parameters[0].aborted=!0,void 0)}}}if(a=g.extend(!0,{},a),a.since||(a.since=0),"latest"===a.since){var c;return f.info(function(b,c){a.aborted||(a.since=c.update_seq-1,f.changes(a))}),{cancel:function(){return c?c.cancel():(Pouch.DEBUG&&console.log("Cancel Changes Feed"),a.aborted=!0,void 0)}}}return"descending"in a||(a.descending=!1),a.limit=0===a.limit?1:a.limit,i._changes(a)},f.close=function(a){return f.taskqueue.ready()?i._close(a):(f.taskqueue.addTask("close",arguments),void 0)},f.info=function(a){return f.taskqueue.ready()?i._info(a):(f.taskqueue.addTask("info",arguments),void 0)},f.id=function(){return i._id()},f.type=function(){return"function"==typeof i._type?i._type():a.adapter},f.bulkDocs=function(a,b,c){if(!f.taskqueue.ready())return f.taskqueue.addTask("bulkDocs",arguments),void 0;if("function"==typeof b&&(c=b,b={}),b=b?g.extend(!0,{},b):{},!a||!a.docs||a.docs.length<1)return h(c,Pouch.Errors.MISSING_BULK_DOCS);if(!Array.isArray(a.docs))return h(c,Pouch.Errors.QUERY_PARSE_ERROR);for(var d=0;d<a.docs.length;++d)if("object"!=typeof a.docs[d]||Array.isArray(a.docs[d]))return h(c,Pouch.Errors.NOT_AN_OBJECT);return a=g.extend(!0,{},a),"new_edits"in b||(b.new_edits=!0),i._bulkDocs(a,b,k(c))};var m={};m.ready=!1,m.queue=[],f.taskqueue={},f.taskqueue.execute=function(a){m.ready&&m.queue.forEach(function(b){b.task=a[b.name].apply(null,b.parameters)})},f.taskqueue.ready=function(){return 0===arguments.length?m.ready:(m.ready=arguments[0],void 0)},f.taskqueue.addTask=function(a,b){var c={name:a,parameters:b};return m.queue.push(c),c},f.replicate={},f.replicate.from=function(a,b,c){return"function"==typeof b&&(c=b,b={}),Pouch.replicate(a,i,b,c)},f.replicate.to=function(a,b,c){return"function"==typeof b&&(c=b,b={}),Pouch.replicate(i,a,b,c)};for(var n in f)i.hasOwnProperty(n)||(i[n]=f[n]);return a.skipSetup&&(f.taskqueue.ready(!0),f.taskqueue.execute(f)),g.isCordova()&&cordova.fireWindowEvent(a.name+"_pouch",{}),i},"undefined"!=typeof b&&b.exports&&(b.exports=f)},{"./pouch.utils.js":40}],36:[function(a,b){"use strict";var c=function(a,b){var c=g(a),h=g(b);return c-h!==0?c-h:null===a?0:"number"==typeof a?a-b:"boolean"==typeof a?b>a?-1:1:"string"==typeof a?d(a,b):Array.isArray(a)?f(a,b):"object"==typeof a?e(a,b):void 0},d=function(a,b){return a===b?0:a>b?1:-1},e=function(a,b){for(var d=Object.keys(a),e=Object.keys(b),f=Math.min(d.length,e.length),g=0;f>g;g++){var h=c(d[g],e[g]);if(0!==h)return h;if(h=c(a[d[g]],b[e[g]]),0!==h)return h}return d.length===e.length?0:d.length>e.length?1:-1},f=function(a,b){for(var d=Math.min(a.length,b.length),e=0;d>e;e++){var f=c(a[e],b[e]);if(0!==f)return f}return a.length===b.length?0:a.length>b.length?1:-1},g=function(a){var b=["boolean","number","string","object"];return-1!==b.indexOf(typeof a)?null===a?1:b.indexOf(typeof a)+2:Array.isArray(a)?4.5:void 0};"undefined"!=typeof b&&b.exports&&(b.exports=c)},{}],37:[function(a,b){var c,d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"undefined"!=typeof b&&b.exports&&(c=a("./pouch.utils.js"));var e=function g(a,b,c){if(!(this instanceof g))return new g(a,b,c);("function"==typeof b||"undefined"==typeof b)&&(c=b,b={}),"object"==typeof a&&(b=a,a=void 0),"undefined"==typeof c&&(c=function(){});var d=g.parseAdapter(b.name||a);if(b.originalName=a,b.name=b.name||d.name,b.adapter=b.adapter||d.adapter,!g.adapters[b.adapter])throw"Adapter is missing";if(!g.adapters[b.adapter].valid())throw"Invalid Adapter";var e=new f(b,function(a,b){if(a)return c&&c(a),void 0;for(var d in g.plugins){var e=g.plugins[d](b);for(var f in e)f in b||(b[f]=e[f])}b.taskqueue.ready(!0),b.taskqueue.execute(b),c(null,b)});for(var h in e)this[h]=e[h];for(var i in g.plugins){var j=g.plugins[i](this);for(var k in j)k in this||(this[k]=j[k])}};if(e.DEBUG=!1,e.openReqList={},e.adapters={},e.plugins={},e.prefix="_pouch_",e.parseAdapter=function(a){var b,c=a.match(/([a-z\-]*):\/\/(.*)/);if(c){if(a=/http(s?)/.test(c[1])?c[1]+"://"+c[2]:c[2],b=c[1],!e.adapters[b].valid())throw"Invalid adapter";return{name:a,adapter:c[1]}}for(var d=["idb","leveldb","websql"],f=0;f<d.length;++f)if(d[f]in e.adapters){b=e.adapters[d[f]];var g="use_prefix"in b?b.use_prefix:!0;return{name:g?e.prefix+a:a,adapter:d[f]}}throw"No valid adapter found"},e.destroy=function(a,b,c){("function"==typeof b||"undefined"==typeof b)&&(c=b,b={}),"object"==typeof a&&(b=a,a=void 0),"undefined"==typeof c&&(c=function(){});var d=e.parseAdapter(b.name||a),f=function(a){if(a)return c(a),void 0;for(var f in e.plugins)e.plugins[f]._delete(d.name);e.DEBUG&&console.log(d.name+": Delete Database"),e.adapters[d.adapter].destroy(d.name,b,c)};e.removeFromAllDbs(d,f)},e.removeFromAllDbs=function(a,b){if(!e.enableAllDbs)return b(),void 0;var c=a.adapter;return"http"===c||"https"===c?(b(),void 0):(new e(e.allDBName(a.adapter),function(c,d){if(c)return console.error(c),b(),void 0;var f=e.dbName(a.adapter,a.name);d.get(f,function(a,c){a?b():d.remove(c,function(a){a&&console.error(a),b()})})}),void 0)},e.adapter=function(a,b){b.valid()&&(e.adapters[a]=b)},e.plugin=function(a,b){e.plugins[a]=b},e.enableAllDbs=!1,e.ALL_DBS="_allDbs",e.dbName=function(a,b){return[a,"-",b].join("")},e.realDBName=function(a,b){return[a,"://",b].join("")},e.allDBName=function(a){return[a,"://",e.prefix+e.ALL_DBS].join("")},e.open=function(a,b){if(!e.enableAllDbs)return b(),void 0;var c=a.adapter;return"http"===c||"https"===c?(b(),void 0):(new e(e.allDBName(c),function(d,f){if(d)return console.error(d),b(),void 0;var g=e.dbName(c,a.name);f.get(g,function(c){c&&404===c.status?f.put({_id:g,dbname:a.originalName},function(a){a&&console.error(a),b()}):b()})}),void 0)},e.allDbs=function(a){var b=function(c,d){if(0===c.length){var f=[];return d.forEach(function(a){var b=f.some(function(b){return b.id===a.id});b||f.push(a)}),a(null,f.map(function(a){return a.doc.dbname})),void 0}var g=c.shift();return"http"===g||"https"===g?(b(c,d),void 0):(new e(e.allDBName(g),function(e,f){return e?(a(e),void 0):(f.allDocs({include_docs:!0},function(e,f){return e?(a(e),void 0):(d.unshift.apply(d,f.rows),b(c,d),void 0)}),void 0)}),void 0)},c=Object.keys(e.adapters);b(c,[])},e.uuids=function(a,b){"object"!=typeof b&&(b={});for(var d=b.length,e=b.radix,f=[];f.push(c.uuid(d,e))<a;);return f},e.uuid=function(a){return e.uuids(1,a)[0]},e.Errors={MISSING_BULK_DOCS:{status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"},MISSING_DOC:{status:404,error:"not_found",reason:"missing"},REV_CONFLICT:{status:409,error:"conflict",reason:"Document update conflict"},INVALID_ID:{status:400,error:"invalid_id",reason:"_id field must contain a string"},MISSING_ID:{status:412,error:"missing_id",reason:"_id is required for puts"},RESERVED_ID:{status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."},NOT_OPEN:{status:412,error:"precondition_failed",reason:"Database not open so cannot close"},UNKNOWN_ERROR:{status:500,error:"unknown_error",reason:"Database encountered an unknown error"},BAD_ARG:{status:500,error:"badarg",reason:"Some query argument is invalid"},INVALID_REQUEST:{status:400,error:"invalid_request",reason:"Request was invalid"},QUERY_PARSE_ERROR:{status:400,error:"query_parse_error",reason:"Some query parameter is invalid"},DOC_VALIDATION:{status:500,error:"doc_validation",reason:"Bad special document member"},BAD_REQUEST:{status:400,error:"bad_request",reason:"Something wrong with the request"},NOT_AN_OBJECT:{status:400,error:"bad_request",reason:"Document must be a JSON object"},DB_MISSING:{status:404,error:"not_found",reason:"Database not found"}},e.error=function(a,b){return c.extend({},a,{reason:b})},"undefined"!=typeof b&&b.exports){d.Pouch=e,d.PouchDB=e,b.exports=e,e.replicate=a("./pouch.replicate.js").replicate;var f=a("./pouch.adapter.js");a("./adapters/pouch.http.js"),a("./adapters/pouch.idb.js"),a("./adapters/pouch.websql.js"),a("./adapters/pouch.leveldb.js"),a("./plugins/pouchdb.mapreduce.js")}else window.Pouch=e,window.PouchDB=e},{"./adapters/pouch.http.js":26,"./adapters/pouch.idb.js":27,"./adapters/pouch.leveldb.js":23,"./adapters/pouch.websql.js":28,"./plugins/pouchdb.mapreduce.js":34,"./pouch.adapter.js":35,"./pouch.replicate.js":39,"./pouch.utils.js":40}],38:[function(a,b){"use strict";function c(a){for(var b,c=a.shift(),d=[c.id,c.opts,[]],e=d;a.length;)c=a.shift(),b=[c.id,c.opts,[]],e[2].push(b),e=b;return d}function d(a,b){for(var c=[{tree1:a,tree2:b}],d=!1;c.length>0;){var e=c.pop(),f=e.tree1,g=e.tree2;(f[1].status||g[1].status)&&(f[1].status="available"===f[1].status||"available"===g[1].status?"available":"missing");for(var h=0;h<g[2].length;h++)if(f[2][0]){for(var i=!1,j=0;j<f[2].length;j++)f[2][j][0]===g[2][h][0]&&(c.push({tree1:f[2][j],tree2:g[2][h]}),i=!0);i||(d="new_branch",f[2].push(g[2][h]),f[2].sort())}else d="new_leaf",f[2][0]=g[2][h]}return{conflicts:d,tree:a}}function e(a,b,c){var e,f=[],g=!1,h=!1;return a.length?(a.forEach(function(a){if(a.pos===b.pos&&a.ids[0]===b.ids[0])e=d(a.ids,b.ids),f.push({pos:a.pos,ids:e.tree}),g=g||e.conflicts,h=!0;else if(c!==!0){var i=a.pos<b.pos?a:b,j=a.pos<b.pos?b:a,k=j.pos-i.pos,l=[],m=[];for(m.push({ids:i.ids,diff:k,parent:null,parentIdx:null});m.length>0;){var n=m.pop();0!==n.diff?n.ids&&n.ids[2].forEach(function(a,b){m.push({ids:a,diff:n.diff-1,parent:n.ids,parentIdx:b})}):n.ids[0]===j.ids[0]&&l.push(n)}var o=l[0];o?(e=d(o.ids,j.ids),o.parent[2][o.parentIdx]=e.tree,f.push({pos:i.pos,ids:i.ids}),g=g||e.conflicts,h=!0):f.push(a)}else f.push(a)}),h||f.push(b),f.sort(function(a,b){return a.pos-b.pos}),{tree:f,conflicts:g||"internal_node"}):{tree:[b],conflicts:"new_leaf"}}function f(a,b){var d=h.rootToLeaf(a).map(function(a){var d=a.ids.slice(-b);return{pos:a.pos+(a.ids.length-d.length),ids:c(d)}});return d.reduce(function(a,b){return e(a,b,!0).tree},[d.shift()])}var g;"undefined"!=typeof b&&b.exports&&(g=a("./deps/extend"));var h={};h.merge=function(a,b,c){a=g(!0,[],a),b=g(!0,{},b);var d=e(a,b);return{tree:f(d.tree,c),conflicts:d.conflicts}},h.winningRev=function(a){var b=[];return h.traverseRevTree(a.rev_tree,function(a,c,d,e,f){a&&b.push({pos:c,id:d,deleted:!!f.deleted})}),b.sort(function(a,b){return a.deleted!==b.deleted?a.deleted>b.deleted?1:-1:a.pos!==b.pos?b.pos-a.pos:a.id<b.id?1:-1}),b[0].pos+"-"+b[0].id},h.traverseRevTree=function(a,b){var c=[];for(a.forEach(function(a){c.push({pos:a.pos,ids:a.ids})});c.length>0;){var d=c.pop(),e=d.pos,f=d.ids,g=b(0===f[2].length,e,f[0],d.ctx,f[1]);f[2].forEach(function(a){c.push({pos:e+1,ids:a,ctx:g})})}},h.collectLeaves=function(a){var b=[];return h.traverseRevTree(a,function(a,c,d,e,f){a&&b.unshift({rev:c+"-"+d,pos:c,opts:f})}),b.sort(function(a,b){return b.pos-a.pos}),b.map(function(a){delete a.pos}),b},h.collectConflicts=function(a){var b=h.winningRev(a),c=h.collectLeaves(a.rev_tree),d=[];return c.forEach(function(a){a.rev===b||a.opts.deleted||d.push(a.rev)}),d},h.rootToLeaf=function(a){var b=[];return h.traverseRevTree(a,function(a,c,d,e,f){if(e=e?e.slice(0):[],e.push({id:d,opts:f}),a){var g=c+1-e.length;b.unshift({pos:g,ids:e})}return e}),b},"undefined"!=typeof b&&b.exports&&(b.exports=h)},{"./deps/extend":31}],39:[function(a,b){"use strict";function c(a,b,c,d){function f(d,e,f){if(c.onChange)for(var g=0;f>g;g++)c.onChange.apply(this,[A]);w-=f,A.docs_written+=f,j(a,b,t,x,function(){r.notifyRequestComplete(),q()})}function k(){if(!s.length)return r.notifyRequestComplete();var a=s.length;b.bulkDocs({docs:s},{new_edits:!1},function(b,c){f(b,c,a)}),s=[]}function l(b,c){a.get(b,{revs:!0,rev:c,attachments:!0},function(a,b){A.docs_read++,r.notifyRequestComplete(),s.push(b),r.enqueue(k)})}function m(a){return function(b,f){if(r.notifyRequestComplete(),b)return y&&d.cancel(),e.call(c.complete,b,null),void 0;if(0===Object.keys(f).length){for(var g in a)w-=a[g];return q(),void 0}var h=function(a){r.enqueue(l,[i,a])};for(var i in f){var j=a[i]-f[i].missing.length;w-=j,f[i].missing.forEach(h)}}}function n(a,c){b.revsDiff(a,m(c))}function o(a){x=a.seq,u.push(a);var b={};b[a.id]=a.changes.map(function(a){return a.rev});var c={};c[a.id]=a.changes.length,w+=a.changes.length,r.enqueue(n,[b,c])}function p(){v=!0,q()}function q(){v&&0===w&&(A.end_time=new Date,e.call(c.complete,null,A))}var r=new g(d),s=[],t=h(a,b,c),u=[],v=!1,w=0,x=0,y=c.continuous||!1,z=c.doc_ids,A={ok:!0,start_time:new Date,docs_read:0,docs_written:0};i(a,b,t,function(b,f){if(b)return e.call(c.complete,b);if(x=f,!d.cancelled){var g={continuous:y,since:x,style:"all_docs",onChange:o,complete:p,doc_ids:z};c.filter&&(g.filter=c.filter),c.query_params&&(g.query_params=c.query_params);var h=a.changes(g);if(c.continuous){var i=d.cancel;d.cancel=function(){i(),h.cancel()}}}})}function d(a,b){return"string"==typeof a?new Pouch(a,b):(b(null,a),void 0)}var e;"undefined"!=typeof b&&b.exports&&(b.exports=Pouch,e=a("./pouch.utils.js"));var f=function(){var a=this;this.cancelled=!1,this.cancel=function(){a.cancelled=!0}},g=function(a){var b=[],c={},d=!1;return c.enqueue=function(a,e){b.push({fun:a,args:e}),d||c.process()},c.process=function(){if(!d&&b.length&&!a.cancelled){d=!0;var c=b.shift();c.fun.apply(null,c.args)}},c.notifyRequestComplete=function(){d=!1,c.process()},c},h=function(a,b,c){var d=c.filter?c.filter.toString():"";return"_local/"+e.Crypto.MD5(a.id()+b.id()+d)},i=function(a,b,c,d){b.get(c,function(b,e){b&&404===b.status?d(null,0):a.get(c,function(a,b){a&&404===a.status||e.last_seq!==b.last_seq?d(null,0):d(null,b.last_seq)})})},j=function(a,b,c,d,e){var f={_id:c,last_seq:d};b.put(f,function(){a.put(f,function(){e()})})};Pouch.replicate=function(a,b,g,h){g instanceof Function&&(h=g,g={}),void 0===g&&(g={}),g.complete||(g.complete=h);var i=new f;return d(a,function(a,f){return a?e.call(h,a):(d(b,function(a,b){if(a)return e.call(h,a);if(g.server){if("function"!=typeof f.replicateOnServer)return e.call(h,{error:"Server replication not supported for "+f.type()+" adapter"});if(f.type()!==b.type())return e.call(h,{error:"Server replication for different adapter types ("+f.type()+" and "+b.type()+") is not supported"});f.replicateOnServer(b,g,i)}else c(f,b,g,i)}),void 0)}),i}},{"./pouch.utils.js":40}],40:[function(a,b){var c=a("__browserify_Buffer").Buffer,d={};"undefined"!=typeof b&&b.exports?(PouchMerge=a("./pouch.merge.js"),d.extend=a("./deps/extend"),d.ajax=a("./deps/ajax"),d.createBlob=a("./deps/blob"),d.uuid=a("./deps/uuid"),d.Crypto=a("./deps/md5.js")):(d.Crypto=Crypto,d.extend=extend,d.ajax=ajax,d.createBlob=createBlob,d.uuid=uuid);var e=["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree"],f=function(a){return/^_/.test(a)?/^_(design|local)/.test(a):!0},g=function(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local};d.call=function(a){if(typeof a==typeof Function){var b=Array.prototype.slice.call(arguments,1);a.apply(this,b)}},d.isLocalId=function(a){return/^_local/.test(a)},d.isDeleted=function(a,b){b||(b=PouchMerge.winningRev(a)),b.indexOf("-")>=0&&(b=b.split("-")[1]);var c=!1;return PouchMerge.traverseRevTree(a.rev_tree,function(a,d,e,f,g){e===b&&(c=!!g.deleted)}),c},d.filterChange=function(a){return function(b){var c={},d=a.filter&&"function"==typeof a.filter;if(c.query=a.query_params,a.filter&&d&&!a.filter.call(this,b.doc,c))return!1;if(a.doc_ids&&-1===a.doc_ids.indexOf(b.id))return!1;if(a.include_docs)for(var e in b.doc._attachments)b.doc._attachments[e].stub=!0;else delete b.doc;return!0}},d.processChanges=function(a,b,c){b=b.filter(d.filterChange(a)),a.limit&&a.limit<b.length&&(b.length=a.limit),b.forEach(function(b){d.call(a.onChange,b)}),d.call(a.complete,null,{results:b,last_seq:c})},d.parseDoc=function(a,b){var c,g,h,i=null,j={status:"available"};if(a._deleted&&(j.deleted=!0),b)if(a._id||(a._id=Pouch.uuid()),g=Pouch.uuid({length:32,radix:16}).toLowerCase(),a._rev){if(h=/^(\d+)-(.+)$/.exec(a._rev),!h)throw"invalid value for property '_rev'";a._rev_tree=[{pos:parseInt(h[1],10),ids:[h[2],{status:"missing"},[[g,j,[]]]]}],c=parseInt(h[1],10)+1}else a._rev_tree=[{pos:1,ids:[g,j,[]]}],c=1;else if(a._revisions&&(a._rev_tree=[{pos:a._revisions.start-a._revisions.ids.length+1,ids:a._revisions.ids.reduce(function(a,b){return null===a?[b,j,[]]:[b,{status:"missing"},[a]]},null)}],c=a._revisions.start,g=a._revisions.ids[0]),!a._rev_tree){if(h=/^(\d+)-(.+)$/.exec(a._rev),!h)return Pouch.Errors.BAD_ARG;c=parseInt(h[1],10),g=h[2],a._rev_tree=[{pos:parseInt(h[1],10),ids:[h[2],j,[]]}]}"string"!=typeof a._id?i=Pouch.Errors.INVALID_ID:f(a._id)||(i=Pouch.Errors.RESERVED_ID);for(var k in a)a.hasOwnProperty(k)&&"_"===k[0]&&-1===e.indexOf(k)&&(i=d.extend({},Pouch.Errors.DOC_VALIDATION),i.reason+=": "+k);return a._id=decodeURIComponent(a._id),a._rev=[c,g].join("-"),i?i:Object.keys(a).reduce(function(b,c){return/^_/.test(c)&&"_attachments"!==c?b.metadata[c.slice(1)]=a[c]:b.data[c]=a[c],b},{metadata:{},data:{}})},d.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},d.Changes=function(){var a={},b={};return g()?chrome.storage.onChanged.addListener(function(b){null!=b.db_name&&a.notify(b.db_name.newValue)}):"undefined"!=typeof window&&window.addEventListener("storage",function(b){a.notify(b.key)}),a.addListener=function(a,c,d,e){b[a]||(b[a]={}),b[a][c]={db:d,opts:e}},a.removeListener=function(a,c){b[a]&&delete b[a][c]
},a.clearListeners=function(a){delete b[a]},a.notifyLocalWindows=function(a){g()?chrome.storage.local.set({db_name:a}):localStorage[a]="a"===localStorage[a]?"b":"a"},a.notify=function(a){b[a]&&Object.keys(b[a]).forEach(function(c){var e=b[a][c].opts;b[a][c].db.changes({include_docs:e.include_docs,conflicts:e.conflicts,continuous:!1,descending:!1,filter:e.filter,since:e.since,query_params:e.query_params,onChange:function(a){a.seq>e.since&&!e.cancelled&&(e.since=a.seq,d.call(e.onChange,a))}})})},a},d.atob="undefined"!=typeof window&&"atob"in window?function(a){return atob(a)}:function(a){var b=new c(a,"base64");if(b.toString("base64")!==a)throw"Cannot base64 encode full string";return b.toString("binary")},d.btoa="undefined"!=typeof window&&"btoa"in window?function(a){return btoa(a)}:function(a){return new c(a,"binary").toString("base64")},"undefined"!=typeof b&&b.exports&&(b.exports=d)},{"./deps/ajax":29,"./deps/blob":30,"./deps/extend":31,"./deps/md5.js":32,"./deps/uuid":33,"./pouch.merge.js":38,__browserify_Buffer:24}],41:[function(a,b){b.exports=a(10)},{}],42:[function(a,b){var c=(a("pouchdb"),a("backbone-pouch"),a("backbone.marionette/node_modules/backbone")),d=new c.Marionette.Application;d.addRegions({header:"#header",player:"#player",library:"#library",footer:"#footer"}),d.on("initialize:before",function(){try{d.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(a){alert("This browser does not support Web Audio API. Try the latest version of Chrome!")}}),b.exports=d},{"backbone-pouch":4,"backbone.marionette/node_modules/backbone":9,pouchdb:37}],43:[function(a){$=a("jquery"),WaveSurfer=a("wavesurfer"),PouchDB=a("pouchdb"),BackbonePouch=a("backbone-pouch"),Marionette=a("backbone.marionette"),Marionette.$=$,Backbone=a("backbone.marionette/node_modules/backbone"),Backbone.$=$,a("backbone-callbacks").attach(Backbone),_=a("underscore"),Math.uuid=a("node-uuid").v4,Linx=a("./app.js"),debug=!0,$(function(){Backbone.Model.prototype.idAttribute="_id";var a=Marionette.Module._addModuleDefinition;Marionette.Module._addModuleDefinition=function(b,c){c.parent=b,a.apply(this,arguments)},XMLHttpRequest.withCredentials=!0,Backbone.sync=BackbonePouch.sync({db:PouchDB("linx3")}),Linx.start()}),a("./models/source.js"),a("./models/track.js"),a("./models/clip.js"),a("./models/sample.js"),a("./models/player.js"),a("./models/library.js"),a("./models/simplePlayer.js"),a("./collections/index.js"),a("./collections/clipList.js"),a("./collections/trackList.js"),a("./collections/sampleList.js"),a("./controllers/librarian.js"),a("./modules/players.js"),a("./views/clip.js"),a("./views/simpleClip.js"),a("./views/clipList.js"),a("./views/simpleClipList.js"),a("./views/track.js"),a("./views/simpleTrack.js"),a("./views/trackList.js"),a("./views/simpleTrackList.js"),a("./views/player.js"),a("./views/simplePlayer.js"),a("./views/sample.js"),a("./views/sampleList.js"),a("./views/library.js")},{"./app.js":42,"./collections/clipList.js":44,"./collections/index.js":45,"./collections/sampleList.js":46,"./collections/trackList.js":47,"./controllers/librarian.js":48,"./models/clip.js":49,"./models/library.js":50,"./models/player.js":51,"./models/sample.js":52,"./models/simplePlayer.js":53,"./models/source.js":54,"./models/track.js":55,"./modules/players.js":56,"./views/clip.js":57,"./views/clipList.js":58,"./views/library.js":59,"./views/player.js":60,"./views/sample.js":61,"./views/sampleList.js":62,"./views/simpleClip.js":63,"./views/simpleClipList.js":64,"./views/simplePlayer.js":65,"./views/simpleTrack.js":66,"./views/simpleTrackList.js":67,"./views/track.js":68,"./views/trackList.js":69,"backbone-callbacks":1,"backbone-pouch":4,"backbone.marionette":6,"backbone.marionette/node_modules/backbone":9,"node-uuid":25,pouchdb:37,underscore:41}],44:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Clips",function(a,b,c){a.ClipList=c.Collection.extend({model:a.Clip,pouch:{listen:!0,fetch:"query",options:{query:{include_docs:!0,fun:{map:function(a){"clip"===a.type&&emit(a,null)}}},changes:{include_docs:!0,filter:function(a){return a._deleted||"clip"===a.type}}}},initialize:function(){var a=this;debug&&console.log("initing clipList",a);var b=$.Deferred();a.ready=b.promise(),a.fetch({success:function(){debug&&console.log("clipList fetched",a);var c=_.map(a.models,function(a){return a.ready});$.when.apply(this,c).done(function(){debug&&console.log("clipList ready",a),b.resolve()})},error:function(a){throw a}})},parse:function(a){return _.pluck(a.rows,"doc")}})})},{"../app.js":42}],45:[function(a,b){var c=a("../app.js");b.exports=c.module("Library",function(a,b,c){a.Index=c.Collection.extend({model:a.Source,pouch:{listen:!0,fetch:"allDocs",options:{allDocs:{include_docs:!0,attachments:!0},changes:{include_docs:!0}}},parse:function(a){return _.pluck(a.rows,"doc")}})})},{"../app.js":42}],46:[function(a,b){var c=a("../app.js");b.exports=c.module("Samples",function(a,b,c){a.SampleList=c.Collection.extend({model:a.Sample,pouch:{listen:!0,fetch:"query",options:{query:{include_docs:!0,fun:{map:function(a){"sample"===a.type&&emit(a.name,null)}}},changes:{include_docs:!0,filter:function(a){return a._deleted||"sample"===a.type}}}},parse:function(a){return _.pluck(a.rows,"doc")}})})},{"../app.js":42}],47:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks",function(a,b,c){a.TrackList=c.Collection.extend({model:a.Track,pouch:{listen:!0,fetch:"query",options:{query:{include_docs:!0,fun:{map:function(a){"track"===a.type&&emit(a.order,null)}}},changes:{include_docs:!0,filter:function(a){return a._deleted||"track"===a.type}}}},initialize:function(){var a=this;debug&&console.log("initing trackList",a);var b=$.Deferred();a.ready=b.promise(),a.fetch({success:function(){debug&&console.log("trackList fetched",a);var c=_.map(a.models,function(a){return a.ready});$.when.apply(this,c).done(function(){debug&&console.log("trackList ready",a),b.resolve()})},error:function(a){throw a}})},parse:function(a){return debug&&console.log("parsing trackList",a),_.pluck(a.rows,"doc")},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(a){return a.get("order")}})})},{"../app.js":42}],48:[function(a){var b=a("../app.js");b.module("Library",function(a,b,c,d){a.Librarian=d.Controller.extend({initialize:function(){this.library=new b.Library.Library},start:function(){this.library.fetch(),this.show()},show:function(){b.library.show(new b.Library.Views.Library({model:this.library}))}}),a.addInitializer(function(){var b=a.librarian=new a.Librarian;b.start()})})},{"../app.js":42}],49:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Clips",function(a,b,c){a.Clip=c.Model.extend({defaults:function(){return{type:"clip",state:"stop",source:void 0}},initialize:function(){debug&&(console.log("initing clip",this),this.on("all",function(a){console.log("clip event: ",a)}));var a=$.Deferred();this.ready=a.promise(),this.source=b.Library.librarian.library.index.get(this.get("source")),debug&&console.log("clip ready",self),a.resolve()}})})},{"../app.js":42}],50:[function(a,b){var c=a("../app.js");b.exports=c.module("Library",function(a,b,c){a.Library=c.Model.extend({defaults:function(){return{type:"library",libraryType:"simple"}},initialize:function(){this.index=new a.Index,this.index.fetch(),this.sampleList=new b.Samples.SampleList,this.sampleList.fetch()}})})},{"../app.js":42}],51:[function(a,b){var c=a("../app.js");b.exports=c.module("Players",function(a,b,c){a.Player=c.Model.extend({assertState:function(){throw new Error("Player.assertState not implemented")},getTrackState:function(){throw new Error("Player.getTrackState not implemented")},queue:function(){throw new Error("Player.queue not implemented")},defaults:function(){return{type:"player",playerType:"abstract",state:"stop"}},initialize:function(){debug&&(console.log("initing player",this),this.on("all",function(a){console.log("player event: ",a)})),this.trackList=new b.Players.Tracks.TrackList,this.on("change:state",this.assertState)},playPause:function(){switch(this.get("state")){case"pause":case"stop":this.set("state","play");break;case"play":this.set("state","pause");break;default:console.error("WARNING: player in unknown state")}},stop:function(){this.set({state:"stop"})}})})},{"../app.js":42}],52:[function(a,b){var c=a("../app.js");b.exports=c.module("Samples",function(a,b,c,d,e,f){a.Sample=b.Library.Source.extend({constructor:function(a,b){if(a&&a.file instanceof File){var d=a.file;delete a.file,f.defaults(a,{name:d.name}),c.Model.call(this,a,b),this.once("sync",function(){this.attach(d,d.name,d.type,function(a){if(a)throw a})})}else c.Model.apply(this,arguments)},defaults:function(){return{type:"sample",name:"unnamed sample"}},queue:function(){b.Players.player.queue(this)},getWave:function(a,b){debug&&console.log("getting wave",a,b),this.getBlob(function(c,d){var e=Object.create(WaveSurfer);e.init(a);var f=new FileReader;return f.addEventListener("progress",function(a){e.onProgress(a)}),f.addEventListener("load",function(a){e.loadBuffer(a.target.result)}),f.addEventListener("error",function(a){throw a}),d?(e.empty(),f.readAsArrayBuffer(d),b(null,e)):b(new Error("no blob given to getWave"))})}})})},{"../app.js":42}],53:[function(a,b){var c=a("../app.js");b.exports=c.module("Players",function(a,b,c,d,e){a.SimplePlayer=a.Player.extend({defaults:function(){return{type:"player",playerType:"simple",state:"stop"}},initialize:function(){a.Player.prototype.initialize.call(this);var b=e.Deferred();this.ready=b.promise();var c=this;e.when(this.trackList.ready).done(function(){debug&&console.log("player ready",c),b.resolve()})},assertState:function(){debug&&console.log("asserting state on player model",this.get("state"));var a=this.trackList.models[0];a&&a.set("state",this.get("state"))},getTrackState:function(a){return 0===a.get("order")?this.get("state"):"stop"},queue:function(a){debug&&console.log("player queueing source",a),this.trackList.create({},{success:function(b){debug&&console.log("track",b),b.queue(a.get("_id"))},error:function(a){throw a}})}})})},{"../app.js":42}],54:[function(a,b){var c=a("../app.js"),d=a("backbone-pouch"),e=d.attachments();b.exports=c.module("Library",function(a,b,c){a.Source=c.Model.extend({getBlob:function(a){this.attachment(this.attachments()[0],a)},getSource:function(){var a=this.get("type");switch(a){case"sample":b.Samples.Sample.prototype.getWave.apply(this,arguments)}},attach:e.attach,attachments:e.attachments,attachment:e.attachment})})},{"../app.js":42,"backbone-pouch":4}],55:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks",function(a,b,c){a.Track=c.Model.extend({defaults:function(){var a=b.Players.player.trackList.nextOrder();return{type:"track",state:"stop",order:a,clips:void 0}},initialize:function(){debug&&(console.log("initing track",this),this.on("all",function(a){console.log("track event: ",a)}));var b=this,c=$.Deferred();b.ready=c.promise(),b.clipList=new a.Clips.ClipList,$.when(b.clipList.ready).done(function(){debug&&console.log("track ready",b),c.resolve()})},assertState:function(){console.log("asserting state on track model",this.get("state")),this.clips&&this.clips.set("state",this.get("state"))},getClipState:function(){return this.get("state")},queue:function(a){var b=this;b.clipList.create({source:a,track:b.get("_id")},{success:function(a){b.listenTo(a,"destroy",b.destroy),b.trigger("loadClips",a)},error:function(a){throw a}})}})})},{"../app.js":42}],56:[function(a,b){var c=a("../app.js");b.exports=c.module("Players",function(a,b,c,d,e){a.addInitializer(function(){a.player=new a.SimplePlayer,e.when(a.player.ready).done(function(){b.player.show(new a.Views.SimplePlayer({model:a.player}))})})})},{"../app.js":42}],57:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Clips.Views",function(b,c,d,e){b.ClipView=e.ItemView.extend({tagName:"li",template:a("templates").clip,modelEvents:{destroy:"close"},initialize:function(){debug&&(console.log("initing clip view",this),this.on("all",function(a){console.log("clip view event: ",a)}))}})})},{"../app.js":42}],58:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Clips.Views",function(b,c,d){b.ClipListView=d.Marionette.CompositeView.extend({template:a("templates").clipList,itemView:b.ClipView,itemViewContainer:".clipList",initialize:function(){debug&&(console.log("initing clipListView",this),this.on("all",function(a){console.log("clipList view event: ",a)}))}})})},{"../app.js":42}],59:[function(a,b){var c=a("../app.js");b.exports=c.module("Library.Views",function(b,c,d,e){b.Library=e.Layout.extend({tagName:"div",template:a("templates").library,regions:{samples:".samples"},initialize:function(){var a=this;a.model.sampleList.once("sync",function(){a.sampleListView=new c.Samples.Views.SampleListView({collection:a.model.sampleList}),a.show()})},show:function(){this.sampleListView&&this.samples.show(this.sampleListView)},destroy:function(){this.model.destroy()}})})},{"../app.js":42}],60:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Views",function(b,c,d,e){b.Player=e.Layout.extend({tagName:"div",template:a("templates").player,regions:{tracks:".tracks"},initialize:function(){debug&&(console.log("initing player view",this),this.on("all",function(a){console.log("player view event: ",a)}))},onShow:function(){this.trackListView&&(debug&&console.log("player showing tracks",this.trackListView),this.tracks.show(this.trackListView))},destroy:function(){this.model.destroy()}})})},{"../app.js":42}],61:[function(a,b){var c=a("../app.js");b.exports=c.module("Samples.Views",function(b,c,d,e){b.SampleView=e.ItemView.extend({tagName:"li",template:a("templates").sample,ui:{edit:".edit"},events:{"click .destroy":"destroy","click .queue":"queue","dblclick label":"onEditClick","keydown .edit":"onEditKeypress","focusout .edit":"onEditFocusout"},modelEvents:{change:"render"},destroy:function(){this.model.destroy()},queue:function(){this.model.queue()},onEditClick:function(){this.$el.addClass("editing"),this.ui.edit.focus(),this.ui.edit.val(this.ui.edit.val())},onEditFocusout:function(){var a=this.ui.edit.val().trim();this.model.set("name",a).save(),this.$el.removeClass("editing")},onEditKeypress:function(a){var b=13,c=27;return a.which===b?(this.onEditFocusout(),void 0):(a.which===c&&(this.ui.edit.val(this.model.get("name")),this.$el.removeClass("editing")),void 0)}})})},{"../app.js":42}],62:[function(a,b){var c=a("../app.js");b.exports=c.module("Samples.Views",function(b,c,d){b.SampleListView=d.Marionette.CompositeView.extend({template:a("templates").sampleList,itemView:b.SampleView,itemViewContainer:".sampleList",events:{"drop .sampleDrop":"onDrop",dragenter:"onDragenter",dragleave:"onDragleave",dragover:"onDragover"},onDrop:function(a){a.stopPropagation(),a.preventDefault();var b=a.originalEvent.dataTransfer;this.create(b&&b.files&&b.files[0])},onDragover:function(a){a.stopPropagation(),a.preventDefault()},onDragleave:function(a){a.stopPropagation(),a.preventDefault()},create:function(a){c.Library.librarian.library.sampleList.create({file:a})}})})},{"../app.js":42}],63:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Clips.Views",function(a,b){a.SimpleClipView=a.ClipView.extend({events:{"click .play-pause":"onPlayPause","click .stop":"onStop"},initialize:function(){a.ClipView.prototype.initialize.call(this);var c=this;c.on("render",function(){debug&&console.log("clip rendering source",c.model.source),c.model.source.getSource({container:c.$(".source")[0],audioContext:b.audioContext},function(a,b){if(a)throw a;c.wave=b})})},onPlayPause:function(){this.wave.playPause()},onStop:function(){this.wave.stop()}})})},{"../app.js":42}],64:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Clips.Views",function(a){a.SimpleClipListView=a.ClipListView.extend({itemView:a.SimpleClipView})})},{"../app.js":42}],65:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Views",function(b,c){b.SimplePlayer=b.Player.extend({template:a("templates").simplePlayer,events:{"click .playPause":"playPause","click .stop":"stop"},initialize:function(){b.Player.prototype.initialize.call(this),this.trackListView=new c.Players.Tracks.Views.SimpleTrackListView({collection:this.model.trackList})},playPause:function(){this.model.playPause()},stop:function(){this.model.stop()}})})},{"../app.js":42}],66:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Views",function(b,c){b.SimpleTrackView=b.TrackView.extend({template:a("templates").simpleTrack,initialize:function(){b.TrackView.prototype.initialize.call(this),this.clipListView=new c.Players.Tracks.Clips.Views.SimpleClipListView({collection:this.model.clipList})}})})},{"../app.js":42}],67:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Views",function(a){a.SimpleTrackListView=a.TrackListView.extend({itemView:a.SimpleTrackView})})},{"../app.js":42}],68:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Views",function(b,c,d,e){b.TrackView=e.Layout.extend({tagName:"li",template:a("templates").track,events:{"click .destroy":"destroy"},modelEvents:{loadClips:"onShow"},regions:{clips:".trackClips"},initialize:function(){debug&&(console.log("initing track view",this),this.on("all",function(a){console.log("track view event: ",a)}))},onShow:function(){this.clipListView&&(debug&&console.log("track showing clips",this.clipListView),this.clips.show(this.clipListView))},destroy:function(){this.model.destroy()}})})},{"../app.js":42}],69:[function(a,b){var c=a("../app.js");b.exports=c.module("Players.Tracks.Views",function(b,c,d){b.TrackListView=d.Marionette.CompositeView.extend({template:a("templates").trackList,itemView:b.TrackView,itemViewContainer:".trackList",initialize:function(){debug&&(console.log("initing trackListView",this),this.on("all",function(a){console.log("trackList view event: ",a)}))}})})},{"../app.js":42}]},{},[43]);